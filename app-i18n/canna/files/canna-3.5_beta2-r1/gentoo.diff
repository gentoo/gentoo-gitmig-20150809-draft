Index: Canna.conf
===================================================================
RCS file: /var/lib/cvs/canna/Canna.conf,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
131,138c131,143
< cannaBinDir = /usr/local/canna/bin
< cannaSrvDir = /usr/local/canna/bin
< cannaLibDir = /usr/local/canna/lib
< cannaManDir = /usr/local/canna/man
< cannaIncDir = /usr/local/canna/include/canna
< libCannaDir = /usr/lib
< 
< ErrDir  = /usr/spool/canna
---
> cannaBinDir   = /usr/bin
> cannaSrvDir   = /usr/sbin
> cannaLibDir   = /etc/canna
> cannaEtcDir   = /etc/canna
> cannaManDir   = /usr/share/man
> cannaIncDir   = /usr/include/canna
> libCannaDir   = /usr/lib
> cannaDocDir   = /usr/share/doc/canna-3.5_beta2
> cannaShareDir = /usr/share/canna
> 
> ErrDir   = /var/log/canna
> LockDir  = /tmp/.iroha_unix
> LockFile = IROHA
151c156
< cannaDsoRev = 1
---
> cannaDsoRev = 1.0
170c175
< #define JAPANESEMAN
---
> /* #define JAPANESEMAN */
207c212
< DicDir   = $(cannaLibDir)/dic
---
> DicDir   = /var/lib/canna/dic
285a291
> /*
290a297
> */
306a314,316
> 	 echo "s%@(DicDir)%$(DicDir)%g"; \				@@\
> 	 echo "s%@(LockDir)%$(LockDir)%g"; \				@@\
> 	 echo "s%@(LockFile)%$(LockFile)%g"; \				@@\
319a330,332
> 	echo "s%@(DicDir)%$(DicDir)%g" >> $(MANUALSED)		@@\
> 	echo "s%@(LockDir)%$(LockDir)%g" >> $(MANUALSED)		@@\
> 	echo "s%@(LockFile)%$(LockFile)%g" >> $(MANUALSED)		@@\
324a338,339
> MANSUFFIX = 1 /* man section for user programs */
> 
329,330c344,346
< ConvertPathName(file.tmp,file.$(MANSRCSUFF))				@@\
< install.man:: file.tmp							@@\
---
> ConvertPathName(file.tmp,file.man)					@@\
> ConvertPathName(file.jtmp,file.jmn)					@@\
> install.man:: file.tmp file.jtmp					@@\
331a348
> 	MakeDir($(DESTDIR)destdir/ja/man$(MANSUFFIX))		@@\
333c350,351
< 	$(RM) file.tmp							@@\
---
> 	$(INSTALL) -c $(INSTMANFLAGS) file.jtmp $(DESTDIR)destdir/ja/man$(MANSUFFIX)/dest.$(MANSUFFIX)	@@\
> 	$(RM) file.tmp file.jtmp					@@\
335c353
< 	$(RM) file.tmp
---
> 	$(RM) file.tmp file.jtmp
342a361,362
> LIBMANSUFFIX = 3 /* man section for libraries */
> 
347,348c367,369
< ConvertPathName(file.tmp,file.$(MANSRCSUFF))				@@\
< install.man:: file.tmp							@@\
---
> ConvertPathName(file.tmp,file.man)				@@\
> ConvertPathName(file.jtmp,file.jmn)				@@\
> install.man:: file.tmp file.jtmp				@@\
349a371
> 	MakeDir($(DESTDIR)destdir/ja/man$(LIBMANSUFFIX))	@@\
351c373,374
< 	$(RM) file.tmp							@@\
---
> 	$(INSTALL) -c $(INSTMANFLAGS) file.jtmp $(DESTDIR)destdir/ja/man$(LIBMANSUFFIX)/dest.$(LIBMANSUFFIX)	@@\
> 	$(RM) file.tmp file.jtmp					@@\
353c376
< 	$(RM) file.tmp
---
> 	$(RM) file.tmp file.jtmp
378c401
< 		set +x; else (set -x; $(MKDIRHIER) $(DESTDIR)$$i;$(CHOWN) owner $(DESTDIR)$$i;$(CHGRP) group $(DESTDIR)$$i); fi \	@@\
---
> 		set +x; else (set -x; $(MKDIRHIER) $(DESTDIR)$$i;$(CHOWN) owner $(DESTDIR)$$i;$(CHGRP) group $(DESTDIR)$$i); fi; \	@@\
425a449
> 	echo "#define CANNASHAREDIR '$(cannaShareDir)'" >> junk		@@\
448a473
> 	 echo "#define CANNASHAREDIR \"$(cannaShareDir)\""; \		@@\
Index: Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
6c6
<       WORLDOPTS = -k
---
>       WORLDOPTS =
14c14
< 	$(RM) -r include cannaconf.h
---
> 	$(RM) -r include
Index: ccustom/canna.h
===================================================================
RCS file: /var/lib/cvs/canna/ccustom/canna.h,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
44c44
< # if defined(SYSV) || defined(SVR4)
---
> # if defined(SYSV) || defined(SVR4) || defined(linux) || defined(__GNU__)
Index: cmd/cannacheck/ccheck.man
===================================================================
RCS file: /var/lib/cvs/canna/cmd/cannacheck/ccheck.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
49c49
< Name of the host under which \fIcannaserver(1M)\fP is in operation.
---
> Name of the host under which \fIcannaserver(1)\fP is in operation.
52c52
< cannaserver(1M), cannakill(1M), cannastat(1)
---
> cannaserver(1), cannakill(1), cannastat(1)
55c55
< Specifies the name of the host under which \fIcannaserver(1M)\fP is in
---
> Specifies the name of the host under which \fIcannaserver(1)\fP is in
Index: cmd/cannastat/cstat.man
===================================================================
RCS file: /var/lib/cvs/canna/cmd/cannastat/cstat.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
32c32
< server \fIcannaserver(1M)\fP.  The information includes the
---
> server \fIcannaserver(1)\fP.  The information includes the
34c34
< exists, the \fIcannaserver(1M)\fP's version, the number of clients
---
> exists, the \fIcannaserver(1)\fP's version, the number of clients
88c88
< cannaserver(1M), cannakill(1M), cannacheck(1)
---
> cannaserver(1), cannakill(1), cannacheck(1)
93c93
< Specifies the name of the host under which \fIcannaserver(1M)\fP is in
---
> Specifies the name of the host under which \fIcannaserver(1)\fP is in
Index: cmd/catdic/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/cmd/catdic/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
3a4,6
> /* gentoo: use hard links so that the image can be merged correctly */
>               LN = ln
> 
56,75c59,78
< 	$(RM) $(cannaBinDir)/cpdic.exe
< 	$(RM) $(cannaBinDir)/lsdic.exe
< 	$(RM) $(cannaBinDir)/mkdic.exe
< 	$(RM) $(cannaBinDir)/mvdic.exe
< 	$(RM) $(cannaBinDir)/rmdic.exe
< 	$(RM) $(cannaBinDir)/syncdic.exe
< 	$(RM) $(cannaBinDir)/chmoddic.exe
< 	$(RM) $(cannaBinDir)/addwords.exe
< 	$(RM) $(cannaBinDir)/delwords.exe
< 	$(RM) $(cannaBinDir)/cannakill.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/cpdic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/lsdic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/mkdic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/mvdic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/rmdic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/syncdic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/chmoddic.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/addwords.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/delwords.exe
< 	$(LN) $(cannaBinDir)/catdic.exe $(cannaBinDir)/cannakill.exe
---
> 	$(RM) $(DESTDIR)$(cannaBinDir)/cpdic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/lsdic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/mkdic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/mvdic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/rmdic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/syncdic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/chmoddic.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/addwords.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/delwords.exe
> 	$(RM) $(DESTDIR)$(cannaBinDir)/cannakill.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/cpdic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/lsdic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/mkdic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/mvdic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/rmdic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/syncdic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/chmoddic.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/addwords.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/delwords.exe
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic.exe $(DESTDIR)$(cannaBinDir)/cannakill.exe
78,96c81,99
< 	$(RM) $(cannaBinDir)/cpdic
< 	$(RM) $(cannaBinDir)/lsdic
< 	$(RM) $(cannaBinDir)/mkdic
< 	$(RM) $(cannaBinDir)/mvdic
< 	$(RM) $(cannaBinDir)/rmdic
< 	$(RM) $(cannaBinDir)/syncdic
< 	$(RM) $(cannaBinDir)/chmoddic
< 	$(RM) $(cannaBinDir)/addwords
< 	$(RM) $(cannaBinDir)/delwords
< 	$(RM) $(cannaBinDir)/cannakill
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/cpdic
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/lsdic
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/mkdic
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/mvdic
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/rmdic
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/syncdic
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/addwords
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/delwords
< 	$(LN) $(cannaBinDir)/catdic $(cannaBinDir)/cannakill
---
> 	$(RM) $(DESTDIR)$(cannaBinDir)/cpdic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/lsdic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/mkdic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/mvdic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/rmdic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/syncdic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/chmoddic
> 	$(RM) $(DESTDIR)$(cannaBinDir)/addwords
> 	$(RM) $(DESTDIR)$(cannaBinDir)/delwords
> 	$(RM) $(DESTDIR)$(cannaBinDir)/cannakill
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/cpdic
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/lsdic
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/mkdic
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/mvdic
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/rmdic
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/syncdic
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/addwords
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/delwords
> 	$(LN) $(DESTDIR)$(cannaBinDir)/catdic $(DESTDIR)$(cannaBinDir)/cannakill
Index: cmd/catdic/cannakill.man
===================================================================
RCS file: /var/lib/cvs/canna/cmd/catdic/cannakill.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
32c32
< cannaserver(1M).  This causes the server to delete the lock file and
---
> cannaserver(1).  This causes the server to delete the lock file and
35,36c35,36
< The user who has started cannaserver(1M) or the super user can only
< use cannakill(1M) to terminate operation of canncannaer.
---
> The user who has started cannaserver(1) or the super user can only
> use cannakill(1) to terminate operation of canncannaer.
42c42
< cannaserver(1M), cannastat(1), cannacheck(1)
---
> cannaserver(1), cannastat(1), cannacheck(1)
Index: cmd/catdic/catdic.man
===================================================================
RCS file: /var/lib/cvs/canna/cmd/catdic/catdic.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
33c33
< on which \fIcannaserver\fP(1M) is in operation.  (Hereafter, this machine 
---
> on which \fIcannaserver\fP(1) is in operation.  (Hereafter, this machine 
64c64
< cannaserver(1M), lsdic(1), mkdic(1)
---
> cannaserver(1), lsdic(1), mkdic(1)
Index: cmd/catdic/mkdic.man
===================================================================
RCS file: /var/lib/cvs/canna/cmd/catdic/mkdic.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
31c31
< directory of the remote host, on which \fIcannaserver\fP(1M) is in operation. 
---
> directory of the remote host, on which \fIcannaserver\fP(1) is in operation. 
99c99
< catdic(1), cannaserver(1M), lsdic(1)
---
> catdic(1), cannaserver(1), lsdic(1)
Index: cmd/crxgram/crxgram.c
===================================================================
RCS file: /var/lib/cvs/canna/cmd/crxgram/crxgram.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
71a72
> #if !defined(__GLIBC__)
85a87
> #endif /* __GLIBC__ */
Index: cmd/cshost/cshost.man
===================================================================
RCS file: /var/lib/cvs/canna/cmd/cshost/cshost.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
9c9
< connections to \fIcannaserver\fP(1M).
---
> connections to \fIcannaserver\fP(1).
11c11
< \fIcannaserver\fP(1M) allows network connections only from programs
---
> \fIcannaserver\fP(1) allows network connections only from programs
Index: dic/ideo/grammar/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/grammar/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
88,90c88,90
< 	$(CHGRP) $(cannaGroup) $(CANNADICDIR)
< 	$(CHOWN) $(cannaOwner) $(CANNADICDIR)
< 	$(CHMOD) ug+w $(CANNADICDIR)
---
> 	$(CHGRP) $(cannaGroup) $(DESTDIR)$(CANNADICDIR)
> 	$(CHOWN) $(cannaOwner) $(DESTDIR)$(CANNADICDIR)
> 	$(CHMOD) ug+w $(DESTDIR)$(CANNADICDIR)
Index: dic/ideo/grammar/gram.code
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/grammar/gram.code,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
33c33
<  *		新しくつけ足した形式名詞．働きは同じ．
---
>  *		「な」がJTNOのように働く後に引き続く。「はず」「わけ」の二語。
49c49
< 	/* あと/うち/おり/こと/ため/とき/ところ/はず/ほう/ほか/まえ/まま/もの/わけ/ */
---
> 	/* あと/うち/おり/こと/ため/とき/ところ/はず/ほう/ほか/まえ/まま/もの/わけ//あいだ/あまり/うえ/おかげ/かぎり/かた/くせ/ごと/つもり/ふし/やつ/よう/ような/よし */
51c51
< 	/* あいだ/あまり/うえ/おかげ/かぎり/かた/くせ/ごと/つもり/ふし/やつ/よう/ような/よし */
---
> 	/* はず/わけ (KNとの二重登録をする) */
221d220
<  *	ただし，C5r(行く)については一語のみなので連用形のコードとする
226,227c225
< k5      a       か              /* 置か_ない,書か_ない */
<         iO      い              /* 置い_たら,書い_た */
---
> k5      iO      い              /* 置い_たら,書い_た */
232a231
> k5a     _       か              /* 置か_ない,書か_ない: ktek5a参照 */
237,243c236,244
< c5r     a       か              /* 行か_ない */
<         i       き              /* 行き_ます */
<         tO      っ              /* 行っ_たら */
<         u       く              /* 行く_とき */
<         e       け              /* 行け */
<         o       こ              /* 行こ_う */
<         ya      _               /* 行きゃ */
---
> /* 品詞数削減のため主にK5rと活用語尾を共有
>  * 行か_ない k5a
>  * 行き_ます k5ir
>  * 行く_とき k5u
>  * 行け      k5e
>  * 行こ_う   k5o 
>  * 行きゃ    k5ya
>  * 行っ_たら t5tO
>  */
266d266
<         tO      っ              /* 絶っ_たら,打っ_た */
272a273
> t5tO	_	っ              /* 絶っ_たら,打っ_た */
397,400c398,402
< des     ho      でしょ
<         hou     でしょう
<         i       でし
<         u       です
---
> des	i	でし
> 	u	です
> desho	_	でしょ
> deshou	_	でしょう
> 
432,433c434,435
< dd      at      だっ            /* 形動の語尾を兼ねる ? */
<         emo     でも            /* 接続助詞 ? */
---
> ddat	_	だっ            /* 形動の語尾を兼ねる ? */
> ddemo	_	でも            /* 接続助詞 ? */
437a440
> dde3	_	で		/* 「しない_で_くれ」:「し_て_くれ」と対応 */
438a442
> djan	_	_		/* 「じゃ_ない」と同じ前後の接続 */
452c456,457
< sugiru  _       すぎ    /* 行き_すぎる */
---
> sugiru  _       すぎ    /* 行き_すぎる、立派_すぎる */
> yagaru	_	_	/* 動詞の後のみ */
539c544
< nainee	_	_	/* 食べ_ねえ */
---
> nainee	_	ない	/* 食べ_ねえ: 本来の形「ない」もここに収める。 */
600c605,606
< /* kte に接続する口語の品詞 */
---
> /* k5 が接続する口語の品詞:「減ってく」など。 */
> kte2	_	_	/* 減っ_て_かない */
602,608c608,609
< ktec5	a	_	/* 連れて_か_ない */
< /*	i	*/	/* 連れて_き_ます :「連れて来ます」もあるため保留 */
< 	tO	_	/* 連れて_っ_て */
< 	u	_	/* 連れて_く */
< 	e	_	/* 連れて_け */
< 	o	_	/* 連れて_こ_うよ */
< 	ya	_	/* 連れて_きゃ */
---
> /* kte2 に接続する k5a:「付いてかんが」対策 */
> ktek5a	_	か	/* 減って_か_ない */
Index: dic/ideo/grammar/gram.goto
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/grammar/gram.goto,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
40c40
< BB+	KJ NN N00 N01 N02 N03 CJ RT KN TKN FKN
---
> BB+	KJ NN N00 N01 N02 N03 CJ RT KN FKN
51c51
< BB+	rasii youda mitaida dd dda1 dde1 ddar ddeha des JS
---
> BB+	rasii youda mitaida ddat ddemo dda1 dde1 ddar ddeha des desho deshou JS
60a61,64
> #ifdef BUNMATU
> BM+	BM
> #endif
> 
63c67
< YOUGEN+	kx sx aru iru oru kureru morau yaru miru oku rasii dd dda1 dde1 ddar ddeha des ssu
---
> YOUGEN+	kx sx aru iru oru kureru morau yaru miru oku rasii ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou ssu
89c93
< #define	T_NA	Fdatte kdn dd dda2 dde1 ddar ddeha sugiru mitaida ysouda	/* 形容動詞の活用語尾 */
---
> #define	T_NA	Fdatte kdn ddat ddemo dda2 dde1 ddar ddeha djan sugiru mitaida ysouda	/* 形容動詞の活用語尾 */
98c102
< 	rasii ppoi dd dde1 ddar ddeha des ssu mitaida buru na\
---
> 	rasii ppoi ddat ddemo dde1 ddar ddeha djan des desho deshou ssu mitaida buru na\
268c272,274
< CNS+	@T35 CNSUC2
---
> CN-	SUC
> CNS+	@CN
> CNS-	CNSUC1
270,271c276,278
< JNS+	@T35 JNM JNSSUC JNSUC
< JNM+	@T35 JNMSUC JNSUC
---
> JN-	SUC
> JNS+	@JN JNSSUC /* JNM */
> JNM+	@JN JNMSUC
338c345
< CJ+	BB /*dd dde1 ddar ddeha des*/
---
> CJ+	BB /*ddat ddemo dde1 ddar ddeha djan des desho deshou*/
340c347
< RT+	BB KN TKN FKN KJ SX ZX NZX PRE NNPRE CNPRE JNPRE
---
> RT+	BB KN FKN KJ SX ZX NZX PRE NNPRE CNPRE JNPRE
356c363
< OKX+	nasaru rasii dd dda2 dde1 ddar ddeha des
---
> OKX+	nasaru rasii ddat ddemo dda2 dde1 ddar ddeha djan des desho deshou
364c371
< JTNN-	Fttara Ftte Kto
---
> JTNN-	Fttara Ftte Fdano ddemo Kto
366c373
< TKN+	@T35
---
> KN-	SUC
367a375,379
> FKN-	SUC
> /* TKN: 〜な(わけ|はず) */
> TKN+	BB Zka Zkai Zkasira Zkana Zsa Zne Znee Zyo 
> TKN+	Ftoka Fdokoro Fnari Fha Fmo Snara Stte
> TKN+	rasii ppoi ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou ssu mitaida na
375c387
< KS+	mas saseru sugiru nasaru rareru chau 
---
> KS+	mas saseru sugiru yagaru nasaru rareru chau 
378c390
< KS+	kt kte kteha ktya ktemo kto gatera
---
> KS+	kt kte kte2 kteha ktya ktemo kto gatera
383c395
< KSr-	N2T35
---
> KSr-	N2T35 SUC
388c400
< ksru+	BB Kni JTNO JTNN KN TKN FKN Kyori
---
> ksru+	BB Kni JTNO JTNN KN FKN Kyori
394c406
< ksru+	rasii youda mitaida dsouda mai be goto des ssu ddar ddeha
---
> ksru+	rasii youda mitaida dsouda mai be goto des desho deshou ssu ddar ddeha djan
411,412c423
< K5+	k5 k5i
< C5r+	c5r
---
> K5+	k5 k5a k5i
415c426
< T5+	t5 t5i
---
> T5+	t5 t5i t5tO
428c439,440
< K5r+    k5 k5ir
---
> K5r+    k5 k5a k5ir
> C5r+    k5 k5a k5ir t5tO
431c443
< T5r+    t5 t5ir
---
> T5r+    t5 t5ir t5tO
449c461
< k5i+	nasaru tai yasui you ysouda mas sugiru tamae
---
> k5i+	nasaru tai yasui you ysouda mas sugiru yagaru tamae
458c470
< k5i+	nasaru rasii des dd dda2 dde1 na
---
> k5i+	nasaru rasii des desho deshou ddat ddemo dda2 dde1 na
461c473
< k5iO+	kt kte kteha ktya ktemo kto chau
---
> k5iO+	kt kte kte2 kteha ktya ktemo kto chau
468a481
> k5ir-	SUC
472,479d484
< c5ra+	@k5a
< c5ro+	@k5o
< c5ri+	@k5i @T35
< c5rtO+	@k5iO
< c5ru+	@k5u
< c5re+	@k5e
< c5rya+	@k5ya
< 
487a493
> g5ir-	SUC
496a503
> s5ir-	SUC
506a514
> t5ir-	SUC
524a533
> b5ir-	SUC
534a544
> m5ir-	SUC
545a556
> r5ir-	SUC
565a577
> w5ir-	SUC
575a588
> u5ir-	SUC
584c597
< kxi+	tai yasui ysouda mas kt kte kteha ktya ktemo chau sugiru tamae
---
> kxi+	tai yasui ysouda mas kt kte kteha ktya ktemo chau sugiru yagaru tamae
603,604c616,617
< sxi+	ysouda tai yasui nai nainee naisa mai mas sugiru nasaru you tamae ND2KY N2KYT
< sxi+	kt kte kteha ktya ktemo kto
---
> sxi+	ysouda tai yasui nai nainee naisa mai mas sugiru yagaru nasaru chau you tamae ND2KY N2KYT
> sxi+	kt kte kte2 kteha ktya ktemo kto
642c655
< sugiru+	BB Fka you des dd dda1 dde1 ddar ddeha nai nainya nainee mas ks zu znn z na
---
> sugiru+	BB Fka you des desho deshou ddat ddemo dda1 dde1 ddar ddeha djan nai nainya nainee mas ks zu znn z na
643a657
> yagaru+	BB r5 /* r5i, r5ir はわざと入れてない */
660c674
< k5siru+	kt kte kteha ktya ktemo
---
> k5siru+	kt kte kte2 kteha ktya ktemo
675c689
< aru5i+	@r5i Kno Sto Stomo ddar dd dda2 dde1 ddeha
---
> aru5i+	@r5i Kno Sto Stomo ddar ddat ddemo dda2 dde1 ddeha djan
683c697
< kureru+	BB ks Fto Stte
---
> kureru+	BB ks Fto Stte Zi Zya Zyo Zyona
722c736
< kyi+	@k5u Kde Kdeno ddeha Ztto
---
> kyi+	@k5u /*Kde Kdeno*/ ddeha djan Ztto
737a752
> kymi-	SUC
742c757,758
< nainee+	@kyi
---
> nainee+	@kyi dde3
> nainee- Fsura Zne Znee
764c780
< kdni+	/* sx sxu2 */ yoru ddar dd naru
---
> kdni+	sx sxu2 yoru ddar ddat ddemo naru
790,797c806,813
< SUC+	@KN @TKN @FKN N2T10 N2T15 N2T16 JNSUC CNSUC2 JNSSUC JNMSUC
< CNSUC1+	@KN @TKN @FKN N2T10 N2T15 N2T16 JNSUC CNSUC2 JNSSUC JNMSUC
< CNSUC2+	@KN @TKN @FKN N2T10 N2T15 N2T16 JNSUC CNSUC2 JNSSUC JNMSUC
< JNSUC+	@KN @TKN @FKN N2T10 N2T15 N2T16 CNSUC2
< JNSSUC+	@KN @TKN @FKN N2T10 N2T15 N2T16 CNSUC2
< JNMSUC+	@KN @TKN @FKN N2T10 N2T15 N2T16 CNSUC2
< JS+	@KN @TKN @FKN JSSUC @T35 JSmono
< JSSUC+	@KN @TKN @FKN JSmono
---
> SUC+	@KN @FKN N2T10 N2T15 N2T16 JNSUC CNSUC2 JNSSUC JNMSUC
> CNSUC1+	@KN @FKN N2T10 N2T15 N2T16 JNSUC CNSUC2 JNSSUC JNMSUC
> CNSUC2+	@KN @FKN N2T10 N2T15 N2T16 JNSUC CNSUC2 JNSSUC JNMSUC
> JNSUC+	@KN @FKN N2T10 N2T15 N2T16 CNSUC2
> JNSSUC+	@KN @FKN N2T10 N2T15 N2T16 CNSUC2
> JNMSUC+	@KN @FKN N2T10 N2T15 N2T16 CNSUC2
> JS+	@KN @FKN JSSUC @T35 JSmono
> JSSUC+	@KN @FKN JSmono
859c875
< gotoki+	BB Kni Kno Fha KN TKN FKN
---
> gotoki+	BB Kni Kno Fha KN FKN
864c880
< beki+	BB Kga Sto Stomo dd dda1 dde1 ddar ddeha des na Fka
---
> beki+	BB Kga Sto Stomo ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou na Fka
872c888
< zu+	dd dda2 dde2 ddar N2T18
---
> zu+	ddat ddemo dda2 dde2 ddar N2T18
882c898
< znu+	goto dsouda dd dda1 dde2 ddeha ddar youda mitaida rasii N2T18
---
> znu+	goto dsouda ddat ddemo dda1 dde2 ddeha ddar youda mitaida rasii N2T18
917c933
< masen+	BB des Fga Sto Stte Stoka Ssi Skara Snode Skeredo Stomo Smono JTNO
---
> masen+	BB des desho deshou Fga Sto Stte Stoka Ssi Skara Snode Skeredo Stomo Smono JTNO
928c944
< masu+	mai youda JTNO
---
> masu+	deshou desho mai youda JTNO
932a949
> masuru-	desho mai
943c960
< kta+	ddeha dsouda youda mitaida rasii des ssu N2T18 JTNO JTNN KN TKN FKN
---
> kta+	ddeha djan dsouda youda mitaida rasii des desho deshou ssu N2T18 JTNO JTNN KN FKN
950c967,968
< ktari+	BB Fsika Fsura Fdano Fto Ftoka Fnazo Fha Fbakari Fmo Ssae Skoso sx
---
> ktari+	BB Fsika Fsura Fdano Fto Ftoka Fnazo Fha Fbakari Fmo Ssae Skoso 
> ktari+	sx ddar ddat ddemo dda2 dde1 ddeha djan
953,955c971,973
< kte+	nai nainee naisa dd dda2 dde2 des aru iru oru kureru morau yaru miru oku
< kte+	Zna Znaa Zne Znee Zya Zyo /* kx はずす予定 */
< kte+	ktec5 nn te
---
> kte+	nai nainee naisa ddat ddemo dda2 dde2 des desho deshou aru iru oru kureru morau yaru miru oku
> kte+	Zsa Zna Znaa Zne Znee Zya Zyo /* kx はずす予定 */
> kte+	nn te
963c981
< ktemo+	dd dda2 dde2 ddar des
---
> ktemo+	ddat ddemo dda2 dde2 ddar des desho deshou
991c1009
< dde1+	nai nainee naisa aru des
---
> dde1+	nai nainee naisa aru des desho deshou
994c1012,1014
< dde2+	nai nainee naisa aru des
---
> dde2+	nai nainee naisa aru des desho deshou
> dde3+	BB Kno Fsae Fbakari Fkoso Ska iru kureru morau oku
> dde3+	Zna Znaa Zne Znee Zyo
1011a1032
> djan+	BB Zka
1014c1035
< youda+	kdn dd dda1 dde1 ddar ddeha des BB Zne Zyo na Snara
---
> youda+	kdn ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou BB Zne Zyo na Snara
1016c1037
< ysouda+	kdn dd dda1 dde1 ddar ddeha des BM na Fmo
---
> ysouda+	kdn ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou BM na Fmo
1019c1040
< dsouda+	dd dda1 dde1 ddar ddeha des des na Zna Zne Znee Zyo
---
> dsouda+	ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou na Zna Zne Znee Zyo
1022c1043
< u+	BB KN TKN FKN
---
> u+	BB KN FKN
1035c1056
< na+	JTNO JTNN Zno
---
> na+	TKN JTNO JTNN Zno
1037,1045c1058,1064
< ktec5a+		@c5ra
< ktec5a-		saseru simeru znn z
< ktec5o+		@c5ro
< ktec5tO+	@c5rtO
< ktec5u+		@c5ru
< ktec5u-		Fkoso Fsae Fnomi Stote Snagara goto
< ktec5e+		@c5re
< ktec5e-		Sdomo Stote Stutu nainya tamae
< ktec5ya+ 	@c5rya
---
> /* 食べ_てかない
>  * 「蹴っていてき」を避けるため、k5ir は除く
>  * 「ついてかんが」を避けるため、k5a ではなく ktek5a
>  */
> kte2+	k5 ktek5a t5tO
> ktek5a+	@k5a
> ktek5a-	saseru simeru znn z
1062c1081
< nn+	JTNO Zno dd dde2 ddar ddeha des
---
> nn+	JTNO Zno ddat ddemo dde2 ddar ddeha djan des desho deshou
1066c1085
< #define	K_BUN dd dda2 dde2 ddar ddeha des rasii/* 〜からだ、〜からです、〜かららしい */
---
> #define	K_BUN ddat ddemo dda2 dde2 ddar ddeha djan des desho deshou rasii/* 〜からだ、〜からです、〜かららしい */
1077c1096
< Kno+	BB KN TKN FKN youda goto
---
> Kno+	BB KN FKN youda goto
1090c1109
< Kto+	ddar dd dda2 dde1
---
> Kto+	ddar ddat ddemo dda2 dde1
1093c1112
< Kni+	Fka Fmade Fya Fdano Fnari Fsae Fsika Fsura Fnomi Fbakari Fkiri
---
> Kni+	Fka Fmade Fya Fdano Fnari Fsae Fsika Fsura Fnomi Fbakari
1095a1115
> Kni+	naru
1117c1137
< Fka+	BB @KAKUJS dd dda2 dde1 ddar ddeha
---
> Fka+	BB @KAKUJS ddat ddemo dda2 dde1 ddar ddeha djan
1123c1143
< Fkiri+	BB @KAKUJS dd dda2 dde1 ddar ddeha des rasii N2T18
---
> Fkiri+	BB @KAKUJS ddat ddemo dda2 dde1 ddar ddeha djan des desho deshou rasii na N2T18
1131c1151
< Fkoso+	BB /*Kga Kwo Kto Fka Fha*/ dd dda2 dde1 ddar ddeha des
---
> Fkoso+	BB /*Kga Kwo Kto Fka Fha*/ ddat ddemo dda2 dde1 ddar ddeha des desho deshou
1141c1161
< Fzutu+	BB @KAKUJS dd dda2 dde1 ddar ddeha des nai rasii N2T18
---
> Fzutu+	BB @KAKUJS ddat ddemo dda2 dde1 ddar ddeha djan des desho deshou nai rasii N2T18
1153,1155c1173,1175
< Fto+	BB Kde Kdeno Kni Kwo Kmade Kno dd dda2 dde1 ddar ddeha des rasii
< Fto+	Fya Fdano Fnari Fsae Fsika Fsura Fnomi Fbakari Fkiri Fyara Fka Fkoso
< Fto+	Fdeha Fdemo Fdokoro Fnazo Fha Fmade Fmo Snara
---
> Fto+	BB Kde Kdeno Kni Kwo Kmade Kno ddat ddemo dda2 dde1 ddar ddeha djan des desho deshou rasii
> Fto+	Fnari Fsae Fsika Fsura Fnomi Fbakari Fkiri Fyara Fka Fkoso
> Fto+	Fdeha Fdemo Fha Fmade Fmo Snara
1177c1197
< Fnazo+	BB @KAKUJS dd dda2 dde1 ddar ddeha des rasii
---
> Fnazo+	BB @KAKUJS ddat ddemo dda2 dde1 ddar ddeha des desho deshou rasii
1188c1208
< Fnari+	BB Kga Kno Kni Khe Kwo Kkara Kmade Kyori Kto dd dda2 dde1 ddar ddeha
---
> Fnari+	BB Kga Kno Kni Khe Kwo Kkara Kmade Kyori Kto ddat ddemo dda2 dde1 ddar ddeha
1192c1212
< Fnomi+	BB @KAKUJS dd dda2 dde1 ddar ddeha des rasii na	/* のみ＋なの */
---
> Fnomi+	BB @KAKUJS ddat ddemo dda2 dde1 ddar ddeha des desho deshou rasii na	/* のみ＋なの */
1199c1219
< Fbakari+ BB @KAKUJS dd dda1 dde1 ddar ddeha des rasii N2T18
---
> Fbakari+ BB @KAKUJS ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou rasii N2T18
1207c1227
< Fmade+	dd dda1 dde1 ddar ddeha des rasii N2T18 /* kx はずす予定 */
---
> Fmade+	ddat ddemo dda1 dde1 ddar ddeha djan des desho deshou rasii N2T18 /* kx はずす予定 */
1210c1230
< Fmo+	BB @KAKUJS Fka Sto nai rasii dd dda2 dde2 ddar ddeha des
---
> Fmo+	BB @KAKUJS Fka Sto nai rasii ddat ddemo dda2 dde2 ddar ddeha djan des desho deshou
1223c1243
< Fyue+	dd dda2 dde1 ddar ddeha des
---
> Fyue+	ddat ddemo dda2 dde1 ddar ddeha des desho deshou
1233c1253
< Skara+	dd dda2 dde1 ddar ddeha des rasii N2T18
---
> Skara+	ddat ddemo dda2 dde1 ddar ddeha djan des desho deshou rasii N2T18
1279c1299
< Snagara+ BB Kga dd dda2 dde1 ddar ddeha
---
> Snagara+ BB Kga ddat ddemo dda2 dde1 ddar ddeha djan
Index: dic/ideo/pubdic/a.p
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/a.p,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
662c662
< あたらし 新し #KYmi 255
---
> あたらし 新し #KYme 255
1072a1073,1074
> あらんかぎりの あらんかぎりの #RT 0
> あらんかぎりの あらん限りの #RT 0
3706c3708
< えんずい 延随 #T35 0
---
> えんずい 延髄 #T35 0
5563c5565,5567
< おなじ おなじ #T35 0
---
> おなじ 同じ #RT 0
> おなじ おなじ #T05 0
> おなじ おなじ #RT 0
Index: dic/ideo/pubdic/h.p
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/h.p,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
3484c3484
< ふる 古 #KYmi 138
---
> ふる 古 #KYmime 138
Index: dic/ideo/pubdic/k.p
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/k.p,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
2895,2896c2895,2896
< き 切 #R5 152
< き き #R5 6
---
> き 切 #R5r 152
> き き #R5r 6
7804c7804
< こつずい 骨随 #T35 0
---
> こつずい 骨髄 #T35 0
Index: dic/ideo/pubdic/m.p
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/m.p,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
2238c2238
< も 模 #SX 45
---
> も 模 #KJ 0
2366a2367,2368
> もした 模した #RT 0
> もして 模して #F14 0
2640a2643
> もんだいな 問題な #KY 0
Index: dic/ideo/pubdic/n.p
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/n.p,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
9a10
> な 亡 #KY 0
888a890
> にしめ 煮染め #KSr 0
Index: dic/ideo/pubdic/pod.c
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/pod.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
32a33
> #include <stdlib.h>
54c55
< static FILE *in1 = stdin, *in2 = stdin;
---
> static FILE *in1, *in2;
1378a1380,1381
> 
>   in1 = stdin, in2 = stdin;
Index: dic/ideo/pubdic/t.p
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/pubdic/t.p,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
939,940c939,940
< たとえば たとえば #CJ 5
< たとえば 例えば #F14 226
---
> たとえば たとえば #T36 5
> たとえば 例えば #T36 226
4496a4497,4501
> とって とって #T35 0
> とって 取っ手 #T35 0
> とって 取手 #T35 0
> とって 把っ手 #T35 0
> とって 把手 #T35 0
Index: dic/ideo/words/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
72,78c72,78
< 	$(CHGRP) $(cannaGroup) $(CANNADICDIR)
< 	$(CHOWN) $(cannaOwner) $(CANNADICDIR)
< 	$(CHMOD) ug+w $(CANNADICDIR)
< 	$(CHGRP) $(cannaGroup) $(DicDir)
< 	$(CHOWN) $(cannaOwner) $(DicDir)
< 	$(CHMOD) ug+w $(DicDir)
< 	$(CHMOD) -w $(CANNADICDIR)/dics.dir
---
> 	$(CHGRP) $(cannaGroup) $(DESTDIR)$(CANNADICDIR)
> 	$(CHOWN) $(cannaOwner) $(DESTDIR)$(CANNADICDIR)
> 	$(CHMOD) ug+w $(DESTDIR)$(CANNADICDIR)
> 	$(CHGRP) $(cannaGroup) $(DESTDIR)$(DicDir)
> 	$(CHOWN) $(cannaOwner) $(DESTDIR)$(DicDir)
> 	$(CHMOD) ug+w $(DESTDIR)$(DicDir)
> 	$(CHMOD) -w $(DESTDIR)$(CANNADICDIR)/dics.dir
Index: dic/ideo/words/dics.dir
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/dics.dir,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
35a36
> suffix.ctd(.swd)		-suffix---
Index: dic/ideo/words/hojomwd.t
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/hojomwd.t,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
24a25
> きりがな #KY きりがな
28c29
< なあ #T35 @
---
> なあ #CJ なあ
Index: dic/ideo/words/hojoswd.t
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/hojoswd.t,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
25c25
< か #ktec5a @ #ktok5a @
---
> か #ktok5a @
33,34c33,34
< きゃ #ktec5ya @ #ktok5ya @ #kykya @ #k5ya @ #c5rya @
< きゃあ #ktec5ya @ #ktok5ya @ #kykya @ #k5ya @ #c5rya @
---
> きゃ #ktok5ya @ #kykya @ #k5ya @
> きゃあ #ktok5ya @ #kykya @ #k5ya @
37c37
< く #ktec5u @ #ktok5u @
---
> く #ktok5u @
42c42
< け #ktec5e @ #ktok5e @
---
> け #ktok5e @
46c46
< こ #ktec5o @ #ktok5o @
---
> こ #ktok5o @
56a57
> じゃん #djan @
70d70
< っ #ktec5tO @
78a79
> て #kte2 @
96c97
< はず #KN @
---
> はず #KN @ #TKN @
104a106
> やが #yagaru @
112a115
> わけ #TKN @
115a119
> んで #Snode @
Index: dic/ideo/words/keishiki.t
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/keishiki.t,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
29,30d28
< ほう #KN @
< ほか #KN @
Index: dic/ideo/words/obsolete.dir
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/obsolete.dir,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
35c35
< keishiki.t(.mwd)	-keishiki---
---
> keishiki.t(.swd)	-keishiki---
Index: dic/ideo/words/suffix.t
===================================================================
RCS file: /var/lib/cvs/canna/dic/ideo/words/suffix.t,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
3c3
< てき #N2T17*1187 的
---
> てき #N2T16*1187 的
Index: dic/phono/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/dic/phono/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
30,32c30,33
<                DICDIR = $(cannaLibDir)/dic
<             SAMPLEDIR = $(cannaLibDir)/sample
<          SAMPLESRCDIR = $(cannaLibDir)/sample/src
---
>                DICDIR = $(DicDir)
>         CANNASHAREDIR = $(cannaShareDir)
>             SAMPLEDIR = $(cannaDocDir)/sample
>          SAMPLESRCDIR = $(cannaDocDir)/sample/src
72c73
< InstallMultiple($(ROMKANA_TABLES),$(DICDIR))
---
> InstallMultiple($(ROMKANA_TABLES),$(CANNASHAREDIR))
Index: lib/RK/RKintern.h
===================================================================
RCS file: /var/lib/cvs/canna/lib/RK/RKintern.h,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
36a37,39
> #define FUJIEDA_HACK
> /* 藤枝＠ＪＡＩＳＴのハックを有効にする */
> 
101c104
< # if defined(SYSV) || defined(SVR4)
---
> # if defined(SYSV) || defined(SVR4) || defined(linux) || defined(__GNU__)
610a614,616
> #ifdef FUJIEDA_HACK
>   int			P_KJ; /* tankanji */
> #endif
684a691,693
> #ifdef FUJIEDA_HACK
> #define NW_DUMMY	0x08
> #endif
Index: lib/RK/context.c
===================================================================
RCS file: /var/lib/cvs/canna/lib/RK/context.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
177a178,180
> #ifdef FUJIEDA_HACK
> 		SG.P_KJ  = RkGetGramNum(SG.gramdic, "KJ");
> #endif
Index: lib/RK/dd.c
===================================================================
RCS file: /var/lib/cvs/canna/lib/RK/dd.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
30c30
< #if defined(USG) || defined(SYSV) || defined(SVR4) || defined(WIN)
---
> #if defined(USG) || defined(SYSV) || defined(SVR4) || defined(WIN) || defined(linux)
1746c1746
<     dicsdir = malloc(strlen(dd->dd_path + strlen("/dics.dir") + 1));
---
>     dicsdir = malloc(strlen(dd->dd_path) + strlen("/dics.dir") + 1);
Index: lib/RK/nword.c
===================================================================
RCS file: /var/lib/cvs/canna/lib/RK/nword.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
210a211,213
> #ifdef FUJIEDA_HACK
>     conc.nw_flags = p->nw_flags&(NW_PRE|NW_SUC|NW_SWD|NW_DUMMY);
> #else
211a215
> #endif
239a244,246
> #ifdef FUJIEDA_HACK
> 	conc.nw_flags |= (q->nw_flags & NW_DUMMY);
> #endif
701a709
> #ifndef FUJIEDA_HACK
705a714
> #endif
745a755,757
> #ifdef FUJIEDA_HACK
> 	    w[-1].nw_flags |= NW_DUMMY;
> #endif
987,988c999,1002
< 		/* 句読点その他の場合には文章末検査は不要 */
< 		if (q->nw_class >= ND_OPN)
---
> 		/* 句読点などの場合と、読みを尽くしている場合には
> 		   文章末検査は不要 */
> 		if (q->nw_class >= ND_OPN ||
> 		    (doflush && yy + pq->nw_ylen == cx->store->nyomi))
1352a1367,1383
> #ifdef BUNMATU
> static
> struct nword	*
> modifyPrio(cx, words)
>     struct RkContext	*cx;
>     struct nword	*words;
> {
>   struct RkKxGram	*gram = cx->gram->gramdic;
>   struct nword		*w;
> 
>   for (w = words; w; w = w->nw_next)
>     if (w->nw_prio > 0 && !IsBunmatu(gram, w->nw_rowcol))
> 	w->nw_prio += 0x2000 << 4;
>   return words;
> }
> #endif
> 
1363a1395,1397
> #ifdef BUNMATU
>   full = sortWord(modifyPrio(cx, parseBun(cx, yy, ys, ye, 1, 0, &maxclen)));
> #else
1364a1399
> #endif
1384a1420,1454
> #define FUJIEDA_HACK
> /* 藤枝＠ＪＡＩＳＴのハックを有効にする */
> 
> #ifdef FUJIEDA_HACK
> static
> void
> evalSplit(cx, suc, ul)
>      struct RkContext	*cx;
>      struct nword	*suc;
>      struct splitParm	*ul;
> {
>   struct nword	*p;
>   unsigned	l2;
>   unsigned long	u2;
>   
>   l2 = 0;
>   u2 = 0L;
>   for (p = suc; p; p = p->nw_next)  
>   {
>     if (!CanSplitWord(p) || /* 文節にならない */
> 	OnlyBunmatu(p) || /* リテラルの直前でしか文節になれない */
> 	(p->nw_rowcol == cx->gram->P_KJ) || /* 単漢字 */
> 	(p->nw_flags & NW_DUMMY) || /* 捏造された名詞 */
> 	(p->nw_flags & NW_SUC))
>       continue;
>     if (l2 <= p->nw_ylen) {
>       l2 = p->nw_ylen;
>       if (u2 < p->nw_prio)
>         u2 = p->nw_prio;
>     }
>   }
>   ul->l2 = l2;
>   ul->u2 = u2;
> }
> #else /* FUJIEDA_HACK */
1398a1469,1471
> #ifdef BUNMATU
>     if (!CanSplitWord(p) || OnlyBunmatu(p) || (p->nw_flags & NW_SUC))
> #else
1399a1473
> #endif
1402a1477,1480
> #ifdef FUJIEDA_HACK
>     /* 読みが一文字の単語の優先度は考慮しない */
>     if (u2 < p->nw_prio && p->nw_ylen > 1)
> #else
1403a1482
> #endif
1408a1488
> #endif /* FUJIEDA_HACK */
1421a1502,1505
> #ifdef FUJIEDA_HACK
>   int			L, L1 = 0, L2;
>   unsigned long		U;
> #else
1423a1508
> #endif
1450a1536,1538
> #ifdef FUJIEDA_HACK
>     U = 0L;
> #else
1451a1540
> #endif
1457c1546,1549
<       int				l, l1;
---
>       int			l, l1;
> #ifdef FUJIEDA_HACK
>       unsigned long		u;
> #endif
1459c1551
<       /* ichido ni 2tu tukomono ha yameru */
---
>       /* 文節にならない */
1466c1558
<       /* mijikasugiru/bunsetumatu ni narenai  monoha hazusu */
---
>       /* 読みを消費していない */
1471c1563
<       /* shuujoushi ha bun no tochuu deha tukanai */
---
>       /* 一文節にするのが最長 */
1483c1575,1582
<       /* migi donari no bunsetsu wo kaiseki */
---
> #ifdef FUJIEDA_HACK
>       /* 単漢字は文の途中に登場しない */
>       if (w->nw_rowcol == cx->gram->P_KJ) {
>         DontSplitWord(w);
>         continue;
>       }
> #endif
>       /* 右隣の文節を解析 */
1486c1585,1589
< 	  evalSplit(xq[l1].tree, &ul2[l1]);
---
> #ifdef FUJIEDA_HACK
>         evalSplit(cx, xq[l1].tree, &ul2[l1]);
> #else
>         evalSplit(xq[l1].tree, &ul2[l1]);
> #endif
1490c1593,1597
< 	evalSplit(xq[l1].tree, &ul);
---
> #ifdef FUJIEDA_HACK
>       evalSplit(cx, xq[l1].tree, &ul);
> #else
>       evalSplit(xq[l1].tree, &ul);
> #endif
1493a1601,1612
> #ifdef FUJIEDA_HACK
>       u = w->nw_prio + ul.u2;
>       if ((L < l) || /* 二文節最長 */
>         ((L == l) &&
>          (U < u || /* 優先度の合計 */
>           (U == u && (L2 < ul.l2))))) { /* 二文節目の長さ */
>         L = l;
>         U = u;
>         L1 = l1;
>         L2 = ul.l2;
>       }
> #else
1502a1622
> #endif
2002a2123
> /*
2004a2126
> */
Index: lib/RK/permdic.c
===================================================================
RCS file: /var/lib/cvs/canna/lib/RK/permdic.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
259a260,262
> #ifdef FUJIEDA_HACK
> 	dm->dm_gram->P_KJ  = RkGetGramNum(gram, "KJ");
> #endif
Index: lib/RKC/rkc.h
===================================================================
RCS file: /var/lib/cvs/canna/lib/RKC/rkc.h,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
45c45
< # if defined(SYSV) || defined(SVR4) || defined(WIN)
---
> # if defined(SYSV) || defined(SVR4) || defined(WIN) || defined(linux) || defined(__GNU__)
Index: lib/canna/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/lib/canna/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
119,120c119,120
< sglobal.h: GSYM.awk globnames
< 	awk -f GSYM.awk < globnames > $@
---
> includes::
> 	awk -f GSYM.awk < globnames > sglobal.h
Index: lib/canna/canna.h
===================================================================
RCS file: /var/lib/cvs/canna/lib/canna/canna.h,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
109c109
< # if defined(SYSV) || defined(SVR4)
---
> # if defined(SYSV) || defined(SVR4) || defined(linux) || defined(__GNU__)
Index: lib/canna/ebind.c
===================================================================
RCS file: /var/lib/cvs/canna/lib/canna/ebind.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
208c208
<   inbuf[0] = (wchar_t)buffer_return[0];
---
>   inbuf[0] = (wchar_t)(buffer_return[0] & 0xff);
210c210
<     inbuf[i] = (wchar_t)buffer_return[i];
---
>     inbuf[i] = (wchar_t)(buffer_return[i] & 0xff);
Index: lib/canna/romaji.c
===================================================================
RCS file: /var/lib/cvs/canna/lib/canna/romaji.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
39a40
> /* Comment out original code.
44a46,48
> */
> /* Canna 3.5b2 have only cbp files. */
> #define DEFAULT_ROMKANA_TABLE "/dic/default.cbp"
392c396
< 
---
> 	
403c407
< 
---
> 	
412a417
>       }
414,415c419,435
< 	if (retval == (struct RkRxDic *)NULL) { /* 全部オープンできない */
< 	  sprintf(rdic, 
---
>       if (retval == (struct RkRxDic *)NULL) { /* added for Debian by ISHIKAWA Mutsumi <ishikawa@linux.or.jp> */
>         extern jrUserInfoStruct *uinfo;
> 	
>         rdic[0] = '\0';
>         if (uinfo && uinfo->topdir) {
> 	  strcpy(rdic, uinfo->topdir);
>         }
>         else {
>           strcpy(rdic, CANNALIBDIR);
>         }
> 	strcat(rdic, "/");
> 	strcat(rdic, table);
> 	retval = RkwOpenRoma(rdic);
> 	
> 	if (ckverbose) {
> 	  if (retval != (struct RkRxDic *)NULL) {
> 	    if (ckverbose == CANNA_FULL_VERBOSE) {
417,428c437,440
< 		  "ローマ字かな変換テーブル(%s)がオープンできません。",
< #else
< 	"\245\355\241\274\245\336\273\372\244\253\244\312"
< 	"\312\321\264\271\245\306\241\274\245\326\245\353\50\45\163\51\244\254"
< 	"\245\252\241\274\245\327\245\363\244\307\244\255\244\336\244\273"
< 	"\244\363\241\243",
< #endif
< 		  table);
<            /* ローマ字かな変換テーブル(%s)がオープンできません。 */
< 	  addWarningMesg(rdic);
< 	  retval = (struct RkRxDic *)0;
< 	  goto return_ret;
---
>               printf("ローマ字かな変換テーブルは \"%s\" を用います。\n", rdic);
> #endif
> 	    }
> 	  }
430a443,483
>       
>       if (retval == (struct RkRxDic *)NULL) { /* added for Debian by ISHIKAWA Mutsumi <ishikawa@linux.or.jp> */
>         extern jrUserInfoStruct *uinfo;
> 	
>         rdic[0] = '\0';
>         if (uinfo && uinfo->topdir) {
> 	  strcpy(rdic, uinfo->topdir);
>         }
>         else {
>           strcpy(rdic, CANNASHAREDIR);
>         }
> 	strcat(rdic, "/");
> 	strcat(rdic, table);
> 	retval = RkwOpenRoma(rdic);
> 	
> 	if (ckverbose) {
> 	  if (retval != (struct RkRxDic *)NULL) {
> 	    if (ckverbose == CANNA_FULL_VERBOSE) {
> #ifndef WIN
>               printf("ローマ字かな変換テーブルは \"%s\" を用います。\n", rdic);
> #endif
> 	    }
> 	  }
> 	}
>       }
>       
>       if (retval == (struct RkRxDic *)NULL) { /* 全部オープンできない */
> 	sprintf(rdic, 
> #ifndef WIN
> 		"ローマ字かな変換テーブル(%s)がオープンできません。",
> #else
> 		"\245\355\241\274\245\336\273\372\244\253\244\312"
> 		"\312\321\264\271\245\306\241\274\245\326\245\353\50\45\163\51\244\254"
> 		"\245\252\241\274\245\327\245\363\244\307\244\255\244\336\244\273"
> 		"\244\363\241\243",
> #endif
> 		table);
> 	/* ローマ字かな変換テーブル(%s)がオープンできません。 */
> 	addWarningMesg(rdic);
> 	retval = (struct RkRxDic *)0;
>       }
433c486
<  return_ret:
---
> 
Index: misc/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/misc/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
8a9
> #ifdef engineSwitch
10a12,15
> #else
>        PROGRAMS = default.canna
> #endif
> 
22a28
> #ifdef engineSwitch
24a31
> #endif
31c38
< MakeDirectories(install,$(cannaLibDir)/sample/src)
---
> MakeDirectories(install,$(cannaDocDir)/sample/src)
33c40
< InstallNamedNonExec(rMakefile,Makefile,$(cannaLibDir)/sample/src)
---
> InstallNamedNonExec(rMakefile,Makefile,$(cannaDocDir)/sample/src)
35c42
< InstallNamedNonExec(cMakefile,Makefile,$(cannaLibDir)/sample/src)
---
> InstallNamedNonExec(cMakefile,Makefile,$(cannaDocDir)/sample/src)
46,47c53,54
< InstallNonExec(default.canna,$(cannaLibDir))
< InstallNonExec(is.c,$(cannaLibDir)/sample/src)
---
> InstallNonExec(default.canna,$(cannaEtcDir))
> InstallNonExec(is.c,$(cannaDocDir)/sample/src)
Index: misc/default.ca
===================================================================
RCS file: /var/lib/cvs/canna/misc/default.ca,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
37c37
< ;; 一覧表示状態から、文字伸縮を行う。
---
> ;; key bindings to extend and shrink the conversion area
41c41
< ;; シンボルの定義
---
> ;; symbol definitions
Index: misc/initfiles/Imakefile
===================================================================
RCS file: /var/lib/cvs/canna/misc/initfiles/Imakefile,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
9c9
<             SAMPLEDIR = $(cannaLibDir)/sample
---
>             SAMPLEDIR = $(cannaShareDir)
Index: server/IR.h
===================================================================
RCS file: /var/lib/cvs/canna/server/IR.h,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
31c31
< # if defined(SYSV) || defined(SVR4)
---
> # if defined(SYSV) || defined(SVR4) || defined(linux) || defined(__GNU__)
Index: server/connection.c
===================================================================
RCS file: /var/lib/cvs/canna/server/connection.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
87a88,92
> #ifdef USE_INET_SOCKET
> /* flag for using INET Domain Socket */
> extern int UseInet;
> #endif
> 
223,231c228,237
<   if ((request = open_inet_socket ()) != -1)
<   {
<     WellKnownConnections |= (1L << request);
<   }
<   else
<   {
<     ir_debug( Dmsg(5,"Warning: INET domain not created.\n");)
<     return 0; /* 作成に失敗 */
<   }
---
>   if(UseInet){
>     if ((request = open_inet_socket ()) != -1)
>     {
>       WellKnownConnections |= (1L << request);
>     }
>     else
>     {
>       ir_debug( Dmsg(5,"Warning: INET domain not created.\n");)
>       return 0; /* 作成に失敗 */
>     }
233c239,240
<   ir_debug( Dmsg(3,"ＩＮＥＴドメインはできた\n"); )
---
>     ir_debug( Dmsg(3,"ＩＮＥＴドメインはできた\n"); )
>   }
Index: server/misc.c
===================================================================
RCS file: /var/lib/cvs/canna/server/misc.c,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
49d48
< #include <sys/types.h>
52a52
> #include <pwd.h>
53a54
> #include <sys/types.h>
89a91,103
> static char *userID=NULL; /* canna server's user id */
> 
> #ifdef USE_INET_SOCKET
> /* flag for using INET Domain Socket */
> #ifdef USE_UNIX_SOCKET
> /* Not to use INET domain socket, if can use Unix Domain Socket */
> int UseInet = 0;
> #else
> /* if can use Unix Domain Socket, Use INET domain socket */
> int UseInet = 1;
> #endif
> #endif
> 
102c116
< #define USAGE "Usage: cannaserver [-p num] [-l num] [-d] [-syslog] [dichome]"
---
> #define USAGE "Usage: cannaserver [-p num] [-l num] [-u userid] [-syslog] [-inet] [-d] [dichome]"
119a134
>     struct  passwd *pwent;
139a155,169
> 	else if( !strcmp( argv[i], "-u")) {
> 	  if (++i < argc) {
> 	    userID = argv[i];
> 	  }
> 	  else {
> 	    fprintf(stderr, "%s\n", USAGE);
> 	    exit(2);
> 	    /* NOTREACHED */
> 	  }
> 	}
> #ifdef USE_INET_SOCKET
> 	else if( !strcmp( argv[i], "-inet")) {
> 	  UseInet = 1;
> 	}
> #endif
170a201,217
>     if (userID != NULL) {
>         pwent = getpwnam(userID);
> 	if (pwent) {
> 	    if(setgid(pwent->pw_gid)) {
> 	        FatalError("cannaserver:couldn't set groupid to canna user's group\n");	  
> 	    }
> 	    if (initgroups(userID, pwent->pw_gid)) {
> 	        FatalError("cannserver: couldn't init supplementary groups\n");
> 	    }
> 	    if (setuid(pwent->pw_uid)) {
> 	        FatalError("cannaserver: couldn't set userid to %s user\n", userID);
> 	    }
> 	} else if (userID != NULL) {
> 	    FatalError("cannaserver: -u flag specified, but canna not run as root\n");
> 	}
>     }
> 
563,564d609
<     if( current )
< 	current->next = (ACLPtr)NULL ;
651a697,702
> 	if (strlen(DDUSER) + strlen(client->username) +
> 	    strlen(DDGROUP) + strlen(client->groupname) +
> 	    strlen(DDPATH) + 4 >= 256) {
> 	  return(-1);
> 	}
> 
657a709,712
>         if (strlen(DDUSER) + strlen(client->username) +
> 	    strlen(DDPATH) + 2 >= 256) {
> 	  return(-1);
> 	}
Index: server/server.man
===================================================================
RCS file: /var/lib/cvs/canna/server/server.man,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -r1.1.1.1 -r1.2
31c31
< users on the network can access cannaserver(1M).  The scope of
---
> users on the network can access cannaserver.  The scope of
35c35
< After starting, cannaserver(1M) immediately forks and enters the
---
> After starting, cannaserver immediately forks and enters the
39c39
< When starting, cannaserver(1M) creates the lock file
---
> When starting, cannaserver creates the lock file
41,43c41,43
< lock file is deleted automatically at the end of cannaserver(1M) if no
< trouble occurs.  The lock file may exist although cannaserver(1M) is
< not in operation (because cannaserver(1M) terminates abnormally, for
---
> lock file is deleted automatically at the end of cannaserver if no
> trouble occurs.  The lock file may exist although cannaserver is
> not in operation (because cannaserver terminates abnormally, for
46c46
< When starting, cannaserver(1M) examines
---
> When starting, cannaserver examines
59c59
< Outputs the cannaserver(1M) log to /tmp/canna.log.  n (1 to 5)
---
> Outputs the cannaserver log to /tmp/canna.log.  n (1 to 5)
62c62
< Starts cannaserver(1M) in debug mode.  It is executed as the
---
> Starts cannaserver in debug mode.  It is executed as the
68,69c68,69
< .IP "@(cannaLibDir)/dic/*/dics.dir" 36
< Dictionary directory
---
> .IP "@(DicDir)/dics.dir" 36
> Dictionary list
73c73
< Premount dictionary list
---
> Premounted dictionary list
76c76
< cannakill(1M), cannastat(1), cannacheck(1)
---
> cannakill(1), cannastat(1), cannacheck(1)
