#!/usr/bin/spython
import os
import sys

if os.getuid()!=0:
	print "!!! ebuild must be run by root."
	sys.exit(1)

if len(sys.argv)<=2:
	print "expecting two arguments."
	sys.exit(1)

import portage
import getopt

debug=0
	
opts,pargs=getopt.getopt(sys.argv[1:],'',['debug'])
for opt in opts:
  	 if opt[0]=='--debug':
		debug=1 

for x in pargs[1:]:
	a=portage.doebuild(pargs[0],x,os.path.normpath(os.environ["ROOT"])+"/",debug=debug)
	if a:
		sys.exit(a)
