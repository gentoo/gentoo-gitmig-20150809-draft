--- kernel/Makefile.linux.orig	2003-02-03 00:29:25.000000000 +0200
+++ kernel/Makefile.linux	2003-02-03 01:12:05.000000000 +0200
@@ -166,9 +166,9 @@
 endif
 
 MGAOBJS =	mga_drv.o mga_dma.o mga_state.o mga_warp.o mga_irq.o
-MGAHEADERS =	mga.h mga_drv.h mga_drm.h $(DRMHEADERS) $(DRMTEMPLATES)
+MGAHEADERS =	mga.h mga_drv.h mga_drm.h mga_ucode.h $(DRMHEADERS) $(DRMTEMPLATES)
 MGASHARED =	mga.h mga_dma.c mga_drm.h mga_drv.h mga_state.c \
-		mga_ucode.h mga_warp.c
+		mga_ucode.h mga_warp.c mga_irq.c
 
 I810OBJS =	i810_drv.o i810_dma.o
 I810HEADERS =	i810.h i810_drv.h i810_drm.h $(DRMHEADERS) $(DRMTEMPLATES)
@@ -296,6 +296,12 @@
 $(I830OBJS): $(I830HEADERS)
 endif
 
+install: $(MODS)
+	install -d -m 0755 $(DESTDIR)/lib/modules/$(KV)/kernel/drivers/char/drm
+	@for i in $(MODS); do \
+		install -m 0755 $$i $(DESTDIR)/lib/modules/$(KV)/kernel/drivers/char/drm; \
+	done
+
 clean cleandir::
 	rm -f *.o *.a *~ core
 	@for i in $(SHAREDSRC); do \
