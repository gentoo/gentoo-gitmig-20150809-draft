diff -Naur omnibook-2005-02-17/init.c omnibook-2005-02-17-new/init.c
--- omnibook-2005-02-17/init.c	2005-02-17 14:27:32.000000000 +0100
+++ omnibook-2005-02-17-new/init.c	2005-09-01 17:07:15.000000000 +0200
@@ -191,6 +191,7 @@
   { "TOSHIBA",  "Satellite P10*",            NULL,                             NULL,    "Toshiba Satellite P10",       TSP10 },
   { "TOSHIBA",  "Satellite P15*",            NULL,                             NULL,    "Toshiba Satellite P15",       TSP10 },
   { "TOSHIBA",  "Satellite P20*",            NULL,                             NULL,    "Toshiba Satellite P20",       TSP10 },
+  { "TOSHIBA",  "Satellite M30X",            NULL,                             NULL,    "Toshiba Satellite M30X",      TSM30X },
   { "TOSHIBA",  "Satellite M35X",            NULL,                             NULL,    "Toshiba Satellite M35X",      TSM35X },
   { "COMPAL",   NULL,                        NULL,                             "ACL00", "Compal ACL00",                XE3GF },
   { "COMPAL",   NULL,                        NULL,                             "ACL10", "Compal ACL10",                XE3GF },
diff -Naur omnibook-2005-02-17/omnibook.h omnibook-2005-02-17-new/omnibook.h
--- omnibook-2005-02-17/omnibook.h	2005-02-17 14:28:41.000000000 +0100
+++ omnibook-2005-02-17-new/omnibook.h	2005-09-01 17:07:40.000000000 +0200
@@ -41,6 +41,7 @@
 	AMILOD,	/* Fujitsu Amilo D */
 	TSP10,	/* Toshiba Satellite P10 */
 	TSM35X,	/* Toshiba Satellite M35X */
+	TSM30X,	/* Toshiba Satellite M30X */
 };
 
 extern struct __init proc_dir_entry *omnibook_proc_root;
diff -Naur omnibook-2005-02-17/temperature.c omnibook-2005-02-17-new/temperature.c
--- omnibook-2005-02-17/temperature.c	2005-02-17 14:27:32.000000000 +0100
+++ omnibook-2005-02-17-new/temperature.c	2005-09-01 17:07:58.000000000 +0200
@@ -47,6 +47,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if ((retval = omnibook_ec_read(XE3GF_CTMP, &temp)))
 			return retval;
 		retval = temp;
@@ -110,6 +111,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		pmode = S_IFREG | S_IRUGO;
 		proc_temperature = create_proc_read_entry("temperature", pmode, omnibook_proc_root, omnibook_proc_temperature, NULL);
 		break;
diff -Naur omnibook-2005-02-17/ac.c omnibook-2005-02-17-new/ac.c
--- omnibook-2005-02-17/ac.c	2005-02-17 14:27:32.000000000 +0100
+++ omnibook-2005-02-17-new/ac.c	2005-09-01 22:54:00.000000000 +0200
@@ -47,6 +47,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if ((retval = omnibook_ec_read(XE3GF_ADP, &ac)))
 			return retval;
 		retval = (ac & XE3GF_ADP_MASK) ? 1 : 0;
@@ -114,6 +115,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		pmode = S_IFREG | S_IRUGO;
 		proc_ac = create_proc_read_entry("ac", pmode, omnibook_proc_root, omnibook_proc_ac, NULL);
 		break;
diff -Naur omnibook-2005-02-17/battery.c omnibook-2005-02-17-new/battery.c
--- omnibook-2005-02-17/battery.c	2005-02-17 14:27:32.000000000 +0100
+++ omnibook-2005-02-17-new/battery.c	2005-09-01 22:52:08.000000000 +0200
@@ -49,6 +49,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if (num >= 2)
 			return -EINVAL;
 		if ((retval = omnibook_ec_read(XE3GF_BAL, &bat)))
@@ -90,6 +91,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		offset = 0x10;
 		retval = omnibook_battery_present(num);
 		if (retval < 0)
@@ -196,6 +198,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		offset = 0x10;
 		retval = omnibook_battery_present(num);
 		if (retval < 0)
@@ -400,6 +403,7 @@
 		max = 3;
 		break;
 	case TSM35X:
+	case TSM30X:
 		max = 1;
 		break;
 	}
@@ -464,6 +468,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		pmode = S_IFREG | S_IRUGO;
 		proc_battery = create_proc_read_entry("battery", pmode, omnibook_proc_root, omnibook_proc_battery, NULL);
 		break;
diff -Naur omnibook-2005-02-17/lcd.c omnibook-2005-02-17-new/lcd.c
--- omnibook-2005-02-17/lcd.c	2005-02-17 14:27:32.000000000 +0100
+++ omnibook-2005-02-17-new/lcd.c	2005-09-01 22:49:55.000000000 +0200
@@ -48,6 +48,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if ((retval = omnibook_ec_read(XE3GF_BRTS, &brgt)))
 			return retval;
 		retval = brgt &= XE3GF_BRTS_MASK;
@@ -82,6 +83,7 @@
 	case XE3GF:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if ((retval = omnibook_ec_write(XE3GF_BRTS, brgt)))
 			return retval;
 		break;
@@ -161,6 +163,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		pmode = S_IFREG | S_IWUSR | S_IRUGO;
 		if (omnibook_userset)
 			pmode = pmode | S_IWUGO;
diff -Naur omnibook-2005-02-17/onetouch.c omnibook-2005-02-17-new/onetouch.c
--- omnibook-2005-02-17/onetouch.c	2005-02-17 14:27:32.000000000 +0100
+++ omnibook-2005-02-17-new/onetouch.c	2005-09-02 15:53:30.000000000 +0200
@@ -109,6 +109,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if (! omnibook_onetouch_enabled) {
 			if (omnibook_onetouch_on())
 				return -EIO;
@@ -138,6 +139,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		if (omnibook_onetouch_enabled) {
 			if (omnibook_onetouch_off()) {
 				return -EIO;
@@ -199,6 +201,7 @@
 	case AMILOD:
 	case TSP10:
 	case TSM35X:
+	case TSM30X:
 		pmode = S_IFREG | S_IWUSR | S_IRUGO;
 		if (omnibook_userset)
 			pmode = pmode | S_IWUGO;
