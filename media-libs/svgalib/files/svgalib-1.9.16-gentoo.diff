diff -urN svgalib-1.9.16.orig/kernel/svgalib_helper/Makefile svgalib-1.9.16/kernel/svgalib_helper/Makefile
--- svgalib-1.9.16.orig/kernel/svgalib_helper/Makefile	Tue Jul 23 11:45:03 2002
+++ svgalib-1.9.16/kernel/svgalib_helper/Makefile	Sun Sep 15 20:40:29 2002
@@ -30,8 +30,8 @@
 install: device modules_install
 
 modules_install: $(TARGET).o
-	mkdir -p /lib/modules/$(VER)/kernel/misc 
-	install -c $(TARGET).o /lib/modules/$(VER)/misc
+	mkdir -p $(TOPDIR)/lib/modules/$(VER)/misc 
+	install -c $(TARGET).o $(TOPDIR)/lib/modules/$(VER)/misc
 
 device:
 	rm -f /dev/svgalib_helper* /dev/svga /dev/svga?
diff -urN svgalib-1.9.16.orig/Makefile svgalib-1.9.16/Makefile
--- svgalib-1.9.16.orig/Makefile	Sat Jun 15 10:53:52 2002
+++ svgalib-1.9.16/Makefile	Sun Sep 15 20:39:50 2002
@@ -78,10 +78,10 @@
 
 installheaders:
 	@echo Installing header files in $(includedir).
-	@if [ -f /usr/include/vga.h ]; then \
-		rm -f /usr/include/vga.h /usr/include/vgagl.h; \
-		echo Old header files in /usr/include removed.; \
-	fi
+#	@if [ -f /usr/include/vga.h ]; then \
+#		rm -f /usr/include/vga.h /usr/include/vgagl.h; \
+#		echo Old header files in /usr/include removed.; \
+#	fi
 	@mkdir -p $(includedir)
 	@cp $(srcdir)/src/vga.h $(includedir)/vga.h
 	@chmod a+r $(includedir)/vga.h
@@ -95,10 +95,10 @@
 	@chmod a+r $(includedir)/vgakeyboard.h
 
 installsharedlib: $(SHAREDLIBS) $(SVGALIBSHAREDSTUBS)
-	@if [ -f /usr/lib/libvga.sa ]; then \
-		rm -f /usr/lib/libvga.sa /usr/lib/libvgagl.sa; \
-		echo Old stubs in /usr/lib removed.; \
-	fi
+#	@if [ -f /usr/lib/libvga.sa ]; then \
+#		rm -f /usr/lib/libvga.sa /usr/lib/libvgagl.sa; \
+#		echo Old stubs in /usr/lib removed.; \
+#	fi
 ifndef KEEPSHAREDLIBS
 	@echo "Removing shared library images (old & current)..."
 	@for i in $(OBSOLETELDIRS); do \
@@ -112,15 +112,15 @@
 		(cd $(sharedlibdir); \
 		 ln -sf $$foo `echo $$foo | sed 's/\.so\..*/.so/'` ); \
 	done
-	@./fixldsoconf
-	@ldconfig
+#	@./fixldsoconf
+#	@ldconfig
 
 installstaticlib: static
 	@echo Installing static libraries in $(libdir).
-	@rm -f /usr/lib/libvga.a
+#	@rm -f /usr/lib/libvga.a
 	@$(INSTALL_DATA) staticlib/libvga.a $(libdir)/libvga.a
 	@chmod a+r $(libdir)/libvga.a
-	@rm -f /usr/lib/libvgagl.a
+#	@rm -f /usr/lib/libvgagl.a
 	@$(INSTALL_DATA) staticlib/libvgagl.a $(libdir)/libvgagl.a
 	@chmod a+r $(libdir)/libvgagl.a
 
@@ -129,14 +129,14 @@
 		echo No $(bindir) directory, creating it.; \
 		mkdir $(bindir); \
 	fi
-	@if [ -f /usr/bin/restorefont ]; then \
-		echo Removing old utilities in /usr/bin.; \
-		for x in $(UTILS); do rm -f /usr/bin/$$x; done; \
-	fi
-	@if [ -f /usr/bin/convfont ]; then \
-		echo Removing inappropriate utilities in /usr/bin.; \
-		rm -f /usr/bin/convfont /usr/bin/setmclk; \
-	fi
+#	@if [ -f /usr/bin/restorefont ]; then \
+#		echo Removing old utilities in /usr/bin.; \
+#		for x in $(UTILS); do rm -f /usr/bin/$$x; done; \
+#	fi
+#	@if [ -f /usr/bin/convfont ]; then \
+#		echo Removing inappropriate utilities in /usr/bin.; \
+#		rm -f /usr/bin/convfont /usr/bin/setmclk; \
+#	fi
 	@echo Installing textmode utilities in $(bindir):
 	@echo "restorefont:      Save/restore textmode font."
 	@cp utils/restorefont $(bindir)
@@ -162,22 +162,22 @@
 		mkdir $(datadir); \
 		chmod go-w $(datadir); \
 	fi
-	@if [ \( -f /usr/local/lib/libvga.config -a ! -f $(datadir)/libvga.config \) ]; then \
-		echo "Moving old config file /usr/local/lib/libvga.config to $(datadir)." ; \
-		mv -f /usr/local/lib/libvga.config $(datadir)/libvga.config; \
-	fi
-	@if [ \( -f /usr/local/lib/libvga.et4000 -a ! -f $(datadir)/libvga.et4000 \) ]; then \
-		echo "Moving old config file /usr/local/lib/libvga.et4000 to $(datadir)." ; \
-		mv -f /usr/local/lib/libvga.et4000 $(datadir)/libvga.et4000; \
-	fi
-	@if [ \( -f /usr/local/lib/libvga.ega -a ! -f $(datadir)/libvga.ega \) ]; then \
-		echo "Moving old config file /usr/local/lib/libvga.ega to $(datadir)." ; \
-		mv -f /usr/local/lib/libvga.ega $(datadir)/libvga.ega; \
-	fi
-	@if [ \( -f /etc/mach32.eeprom -a ! -f $(datadir)/mach32.eeprom \) ]; then \
-		echo Consider moving your /etc/mach32.eeprom file to $(datadir) ; \
-		echo and changing $(datadir)/libvga.config appropriately. ; \
-	fi
+#	@if [ \( -f /usr/local/lib/libvga.config -a ! -f $(datadir)/libvga.config \) ]; then \
+#		echo "Moving old config file /usr/local/lib/libvga.config to $(datadir)." ; \
+#		mv -f /usr/local/lib/libvga.config $(datadir)/libvga.config; \
+#	fi
+#	@if [ \( -f /usr/local/lib/libvga.et4000 -a ! -f $(datadir)/libvga.et4000 \) ]; then \
+#		echo "Moving old config file /usr/local/lib/libvga.et4000 to $(datadir)." ; \
+#		mv -f /usr/local/lib/libvga.et4000 $(datadir)/libvga.et4000; \
+#	fi
+#	@if [ \( -f /usr/local/lib/libvga.ega -a ! -f $(datadir)/libvga.ega \) ]; then \
+#		echo "Moving old config file /usr/local/lib/libvga.ega to $(datadir)." ; \
+#		mv -f /usr/local/lib/libvga.ega $(datadir)/libvga.ega; \
+#	fi
+#	@if [ \( -f /etc/mach32.eeprom -a ! -f $(datadir)/mach32.eeprom \) ]; then \
+#		echo Consider moving your /etc/mach32.eeprom file to $(datadir) ; \
+#		echo and changing $(datadir)/libvga.config appropriately. ; \
+#	fi
 	@if [ ! -f $(datadir)/libvga.config ]; then \
 		echo Installing default configuration file in $(datadir).; \
 		cp $(confdir)/libvga.config $(datadir)/libvga.config; \
@@ -207,8 +207,8 @@
 lib3dkit-install:
 	(cd threeDKit/; $(MAKE) install)
 	 
-install: uninstall installheaders $(INSTALLSHAREDLIB) installconfig \
-	$(INSTALLSTATICLIB) $(INSTALLUTILS) $(INSTALLMAN) installmodule $(INSTALLDEV) \
+install: installheaders $(INSTALLSHAREDLIB) installconfig \
+	$(INSTALLSTATICLIB) $(INSTALLUTILS) $(INSTALLMAN) installmodule \
 	lib3dkit-install
 	@echo
 	@echo
@@ -285,15 +285,23 @@
 	@rm -f sharedlib/DISTRIBUTION
 	(cd $(dir $@); \
 	 $(MAKE) -f $(srcdir)/src/Makefile $(notdir $@) \
-	 	srcdir="$(srcdir)" DLLFLAGS="$(DLLFLAGS)" \
+	 	srcdir="$(srcdir)" DLLFLAGS="$(DLLFLAGS)" ; \
+	 ln -sf libvga.so.$(VERSION) libvga.so \
 	)
 
-sharedlib/libvgagl.a sharedlib/libvgagl.so.$(VERSION): $(SHAREDDIRS)
+sharedlib/libvgagl.a: $(SHAREDDIRS)
 	(cd $(dir $@); \
 	 $(MAKE) -f $(srcdir)/gl/Makefile $(notdir $@) \
 	 	srcdir="$(srcdir)" DLLFLAGS="$(DLLFLAGS)" \
 	)
 
+sharedlib/libvgagl.so.$(VERSION): $(SHAREDDIRS)
+	(cd $(dir $@); \
+	 $(MAKE) -f $(srcdir)/gl/Makefile $(notdir $@) \
+	 	srcdir="$(srcdir)" DLLFLAGS="$(DLLFLAGS)" ; \
+	 ln -sf libvgagl.so.$(VERSION) libvgagl.so \
+	)
+
 demoprogs: $(PREDEMO) $(DEMODIRS)
 	@for dir in $(DEMODIRS); do \
 		if [ -d $(srcdir)/$$dir ]; then \
diff -urN svgalib-1.9.16.orig/Makefile.cfg svgalib-1.9.16/Makefile.cfg
--- svgalib-1.9.16.orig/Makefile.cfg	Thu Jul 25 14:25:01 2002
+++ svgalib-1.9.16/Makefile.cfg	Sun Sep 15 20:39:50 2002
@@ -35,7 +35,7 @@
 # Common prefix for installation directories.
 # NOTE: This directory must exist when you start the install.
 TOPDIR=
-prefix = $(TOPDIR)/usr/local
+prefix = $(TOPDIR)/usr
 exec_prefix = $(prefix)
 
 # Directory where the shared stubs and static library will be installed.
@@ -48,13 +48,13 @@
 bindir = $(exec_prefix)/bin
 
 # Directory where the run-time configuration files will be installed.
-datadir = $(TOPDIR)/etc/vga
+datadir = $(TOPDIR)/etc/svgalib
 
 # Directory where the header files will be installed.
 includedir = $(prefix)/include
 
 # Directory where the man files will be installed.
-mandir = $(prefix)/man
+mandir = $(prefix)/share/man
 
 # Target binary format.
 TARGET_FORMAT = elf
@@ -84,7 +84,7 @@
 # LIBC_MEMCPY = y
 
 # Uncomment this if you want to compile and install the static libs.
-# INSTALLSTATICLIB = installstaticlib
+INSTALLSTATICLIB = installstaticlib
 
 # Comment this out if you don't want to install the shared libs.
 # If you do not install the shared nor the static libs, 'make static'
@@ -95,7 +95,7 @@
 # Comment this out if you want to keep old shared images. Old header files,
 # library stubs and static libraries CANNOT be kept in public locations
 # except when you rename them yourself.
-# KEEPSHAREDLIBS = keep
+KEEPSHAREDLIBS = keep
 
 # Comment this out if you don't want to compile and install the utilities.
 INSTALLUTILS = installutils
@@ -272,10 +272,8 @@
 endif
 
 
-ifndef CFLAGS
+ifndef OPTIMIZE
 	OPTIMIZE = -fomit-frame-pointer -O2 -fno-strength-reduce -pipe -fPIC
-else
-	OPTIMIZE := $(CFLAGS)
 endif
 
 # You might want to add -m386 here if you have a recently installed 
@@ -284,14 +282,14 @@
 WARN     = -Wall -Wstrict-prototypes
 INCLUDES = -I$(srcdir)/include -I.
 CFLAGS   = $(WARN) $(DLLFLAGS) $(INCLUDES) $(OPTIMIZE) $(DEFINES) 
-LDFLAGS   = -s
+LDFLAGS   =
 
 # additional flags for shared lib.
 DLLFLAGS = -fPIC
 
 # Utilites used.
 AR	  = ar
-INSTALL_PROGRAM	= install -c -s -m 755 -o root -g bin
+INSTALL_PROGRAM	= install -c -m 755 -o root -g bin
 INSTALL_SHLIB	= install -c -m 755 -o root -g bin
 INSTALL_DATA	= install -c -m 644 -o root -g bin
 
diff -urN svgalib-1.9.16.orig/threeDKit/Makefile svgalib-1.9.16/threeDKit/Makefile
--- svgalib-1.9.16.orig/threeDKit/Makefile	Wed Apr  3 09:57:18 2002
+++ svgalib-1.9.16/threeDKit/Makefile	Sun Sep 15 20:39:50 2002
@@ -14,7 +14,7 @@
 # Compiler Section (overrides Makefile.cfg)
 #----------------------------------------------------------------------
 
-INCLUDES += -I$(srcdir)/src
+INCLUDES += -I$(srcdir)/src -I$(srcdir)/gl
 
 #----------------------------------------------------------------------
 # Rules Section
diff -urN svgalib-1.9.16.orig/utils/Makefile svgalib-1.9.16/utils/Makefile
--- svgalib-1.9.16.orig/utils/Makefile	Wed Jul 21 18:41:18 1999
+++ svgalib-1.9.16/utils/Makefile	Sun Sep 15 20:39:50 2002
@@ -13,10 +13,11 @@
 # Compiler Section (overrides Makefile.cfg)
 #----------------------------------------------------------------------
 
-CFLAGS = $(WARN) $(OPTIMIZE) -I../include
+INCLUDES=-I../include
+CFLAGS = $(WARN) $(OPTIMIZE) $(INCLUDES)
 #Use the next one for the Alpha/AXP if you need it
 #LDFLAGS = -L../staticlib 
-LIBS = -lvga -lm
+LIBS = -L$(srcdir)/sharedlib -L$(srcdir)/staticlib -lvga -lm
 
 #----------------------------------------------------------------------
 # Rules Section
@@ -56,7 +57,7 @@
 	$(INSTALLPROG) $(UTILPROGS) $(UTILINSTALLDIR)
 
 .depend:
-	gcc -MM $(patsubst %.o,$(srcdir)/utils/%.c,$(OBJECTS)) >.depend
+	gcc $(INCLUDES) -MM $(patsubst %.o,$(srcdir)/utils/%.c,$(OBJECTS)) >.depend
 
 #
 # include a dependency file if one exists
--- svgalib-1.9.16/src/Makefile.jj	2002-12-13 10:39:52.000000000 +0000
+++ svgalib-1.9.16/src/Makefile	2002-12-13 10:40:05.000000000 +0000
@@ -461,10 +461,6 @@
 vga.o: vga.c
 	$(CC) $(CFLAGS) $(VGA_DEFINES) -c -o $@ $<
 
-#lrmi must NOT be compiled as -fPIC
-lrmi.o: lrmi.c
-	$(CC) $(CFLAGS:-fPIC=) -c -o $@ $<
-
 $(RAMDAC): %.o: %.c
 	$(CC) $(CFLAGS) $(RAMDAC_DEFINES) -c -o $@ $<
 
