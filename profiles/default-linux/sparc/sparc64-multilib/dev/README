Set FEATURES=-sandbox in /etc/make.conf because of a sandbox bug that is seen
when using gcc-config 1.4.0

Make sure you have the latest gcc-config baselayout and portage:
# emerge -uv '>=sys-devel/gcc-config-1.3.11' '>=sys-apps/portage-2.1.51-r9'

Delete the /usr/sparc64-unknown-linux-gnu symlink hackery:
# rm /usr/sparc64-unknown-linux-gnu

Unmerge the kernel compiler as you don't need it any more
# emerge unmerge gcc-sparc64

Switch to profile:
# rm /etc/make.profile
# ln -s /usr/portage/profiles/default-linux/sparc/sparc64-multilib/dev /etc/make.profile

Change CHOST in /etc/make.conf to sparc64-unknown-linux-gnu (or delete it since
the profile sets it for us):
# nano -w /etc/make.conf

Get an updated baselayout
# emerge -v baselayout

Get a sparc64 binutils:
# CC="sparc-unknown-linux-gnu-gcc" emerge -v binutils

Use binutils-config to choose sparc64-* binutils:
# binutils-config -l
# binutils-config <value>
# . /etc/profile

Get a stage1 sparc64 gcc:
# CC="sparc-unknown-linux-gnu-gcc" USE="build static" GCC_MAKE_TARGET="all" emerge -v gcc

Remove sparc32 gcc compiler and binutils from your system
# emerge unmerge \=sys-devel/gcc-<version> \=sys-devel/binutils-<version>
# rm /etc/env.d/gcc/config-sparc-unknown-linux-gnu /etc/env.d/05gcc-sparc-unknown-linux-gnu /etc/env.d/binutils/binutils/config-sparc-unknown-linux-gnu 

Use gcc-config to set your gcc
Choose the sparc64-unknown-linux-gnu one you just emerged
# gcc-config -l
# gcc-config <value>
# . /etc/profile

Use the stage1 gcc to build bootstrap multilib glibc
# USE="-nptl" CBUILD="sparc-unknown-linux-gnu" emerge -v glibc

Now, finally emerge your multilib sandbox, full glibc and gcc
# emerge -v portage gcc glibc

This profile is purely for development purposes only and is subject to break or
even disappear.  If if destroys your system, sorry, but you were warned...
Please let us know, so we can fix the problem, but you ae entering this at
your own risk.

This profile exists to help in development of a pure 64bit userland and a
multilib option.  This profile should be "relatively" safe to use if you want
a pure 64bit environment, but as multilib support in portage is evolving, so
will this profile.  This means that as updates are made to portage, this
profile is subject to change WITHOUT REGARD FOR BACKWARDS COMPATIBILITY.  Any
such drastic change will first be discussed on the gentoo-sparc mailing list.

If you are not 100% certain you know what you're getting into by using this
profile, then don't.  It may render your machine utterly useless and will break
things, so if you DO use it, you should only use it in a chroot jail.

If you use this profile or you have any questions, please contact me on IRC.

--Jeremy
eradicator@gentoo.org
