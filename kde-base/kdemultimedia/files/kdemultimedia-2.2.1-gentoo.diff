--- kmidi/TIMIDITY/motif_p.c~	Sun Jul 22 22:26:41 2001
+++ kmidi/TIMIDITY/motif_p.c	Sun Jul 22 22:26:51 2001
@@ -24,6 +24,7 @@
     */
 #ifdef IA_MOTIF
 
+#include <errno.h>
 #include <stdio.h>
 #include <stdlib.h>
 #include <unistd.h>
--- kmidi/alsa_a.cpp.orig	Thu Aug 16 23:17:55 2001
+++ kmidi/alsa_a.cpp	Thu Aug 16 23:19:27 2001
@@ -426,13 +426,13 @@
     playback_params.fragments_max = extra_param[0];
 #endif
   playback_params.buf.block.frags_min = 1;
-  snd_pcm_plugin_flush(handle__, SND_PCM_CHANNEL_PLAYBACK);
+  snd_pcm_plugin_flush((snd_pcm_t *)handle__, SND_PCM_CHANNEL_PLAYBACK);
 
   playback_params.start_mode = SND_PCM_START_FULL;
   playback_params.stop_mode = SND_PCM_STOP_STOP;
   //playback_params.stop_mode = SND_PCM_STOP_ROLLOVER;
 
-  tmp = snd_pcm_channel_params (handle__, &playback_params);
+  tmp = snd_pcm_channel_params ((snd_pcm_t *)handle__, &playback_params);
 
 //fprintf(stderr,"tmp = %d from snd_pcm_channel_params\n",tmp);
   if (tmp != 0)
@@ -448,7 +448,7 @@
     }
 
 
-  if (snd_pcm_plugin_prepare(handle__, SND_PCM_CHANNEL_PLAYBACK) < 0) {
+  if (snd_pcm_plugin_prepare((snd_pcm_t *)handle__, SND_PCM_CHANNEL_PLAYBACK) < 0) {
       fprintf(stderr, "unable to prepare channel\n");
       return -1;
   } 
@@ -456,7 +456,7 @@
   memset(&setup, 0, sizeof(setup));
   setup.channel = SND_PCM_CHANNEL_PLAYBACK;
   setup.mode = SND_PCM_MODE_BLOCK;
-  if (snd_pcm_plugin_setup(handle__, &setup) < 0) {
+  if (snd_pcm_plugin_setup((snd_pcm_t *)handle__, &setup) < 0) {
       fprintf(stderr, "unable to obtain setup\n");
       return -1;
   }
@@ -466,7 +466,7 @@
 //fprintf(stderr, "setup frags = %d\n", setup.buf.block.frags);
 //fprintf(stderr, "setup frag_size = %d\n", setup.buf.block.frag_size);
 
-  if(snd_pcm_plugin_status(handle__, &playback_status) == 0)
+  if(snd_pcm_plugin_status((snd_pcm_t *)handle__, &playback_status) == 0)
     {
       if (setup.format.rate != orig_rate)
 	{
