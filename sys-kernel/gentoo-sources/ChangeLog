# ChangeLog for sys-kernel/gentoo-sources
# Copyright 2002-2003 Gentoo Technologies, Inc.; Distributed under the GPL v2
# $Header: /var/cvsroot/gentoo-x86/sys-kernel/gentoo-sources/ChangeLog,v 1.50 2004/01/06 15:17:52 plasmaroo Exp $

*gentoo-sources-2.4.20-r10 (06 Jan 2004)

  06 Jan 2004; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r10.ebuild,
  gentoo-sources-2.4.22-r2.ebuild, gentoo-sources-2.4.22.ebuild, 
  files/gentoo-sources-2.4.20-hpt372.patch,
  files/gentoo-sources-2.4.20-rtc_fix.patch,
  files/gentoo-sources-2.4.22-rtc_fix.patch,
  files/gentoo-sources-2.4.CAN-2003-0985.patch:
  Version bump - addresses the security vulnerabilities in bugs #37292 and
  #37317. 2.4.20-r10 also includes the patch for HPT372/HPT374 controllers
  from bug #20986.

  21 Dec 2003; Brian Jackson <iggy@gentoo.org>
  gentoo-sources-2.4.22-r2.ebuild: Bumped to stable.

*gentoo-sources-2.4.22-r2 (21 Dec 2003)

  21 Dec 2003; Brian Jackson <iggy@gentoo.org>
  gentoo-sources-2.4.22-r2.ebuild:
  New version, fixes bug #35045, ACPI update, updated forcedeth, etc.

  05 Dec 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.22-r1.ebuild,
  files/gentoo-sources-2.4.22-kmsgdump.patch:
  Added a fix to fix a "CONFIG_LOG_BUF_SHIFT" problem as
  include/asm-i386/kmsgdump.h was not updated for some reason. Thanks to
  Jeremy Huddleston <jemeryhu at cory.eecs.berkeley.edu> for the patch. 
  This closes bug #35123.

  03 Dec 2003; Brian Jackson <iggy@gentoo.org>
  gentoo-sources-2.4.20-r9.ebuild, files/do_brk_fix.patch:
  Fixup do_brk() patch.

*gentoo-sources-2.4.22-r1 (02 Dec 2003)

  02 Dec 2003; Brian Jackson <iggy@gentoo.org>
  gentoo-sources-2.4.20-r9.ebuild, gentoo-sources-2.4.22-r1.ebuild,
  gentoo-sources-2.4.22.ebuild:
  Version bump for the recent do_brk() vulnerability.

  01 Dec 2003; Brian Jackson <iggy@gentoo.org>
  gentoo-sources-2.4.19-r10.ebuild, gentoo-sources-2.4.20-r5.ebuild,
  gentoo-sources-2.4.20-r6.ebuild, gentoo-sources-2.4.20-r7.ebuild,
  gentoo-sources-2.4.20-r8.ebuild, gentoo-sources-2.4.22.ebuild:
  Added a fix for the recent do_brk() vulnerability.

*gentoo-sources-2.4.22 (01 Dec 2003)

  01 Dec 2003; Brian Jackson <iggy@gentoo.org> gentoo-sources-2.4.22.ebuild:
  added 2.4.22 version as ~x86, it's got one fix from the last
  gentoo-test-sources

  20 Nov 2003; Brandon Low <lostlogic@gentoo.org>
  gentoo-sources-2.4.19-r10.ebuild, gentoo-sources-2.4.20-r5.ebuild,
  gentoo-sources-2.4.20-r6.ebuild, gentoo-sources-2.4.20-r7.ebuild,
  gentoo-sources-2.4.20-r8.ebuild:
  Move version handling logic to after inherit kernel, or insert it where
  necessary

  17 Nov 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r8.ebuild,
  files/gentoo-sources-2.4.20-ipt-route.patch: Added the new ROUTE patch 
  required to build iptables-1.2.9 properly.

*gentoo-sources-2.4.20-r8 (21 Oct 2003)

  21 Oct 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r8.ebuild,
  files/gentoo-sources-2.4.20-grsec-datasize_fix.patch:
  Version bump. This release is mainly a "catch-up" for those who did not get
  the latest unbumped versions and also contains the grsecurity fix to fix
  negative memory counts. Thanks to <bartron@gmx.net> for the patch, Bug #25991

  19 Oct 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-ipt-realm.patch:
  Added a patch to fix the ipt_realm.c bugs we have floating around...

  11 Oct 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-cs46xx-gcc33.patch:
  Added CS46xx patch to fix the GCC 3.3 problems in the driver: Bug 29970

  11 Oct 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-devfs-snd-fix.patch:
  Added a devfs patch to fix some issues with multiple soundcards: Bug #30837.
 
  02 Oct 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-mdcount.patch:
  Added Software RAID patch for fix unsynchronized reference counts: Bug #30124.

  24 Sep 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-sched-interrupt.patch:
  Added scheduler fix which should solve some PCMCIA issues.

  21 Sep 2003; <plasmaroo@gentoo.org> files/gentoo-sources-2.4.20-gcc33.patch:
  Added ip_nat_core.c GCC3.3 fix [Bug 28561 et al.]

  14 Sep 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-grsec-disabled.patch:
  Added a GRSEC patch to make sysctl work when GRSEC is disabled...

  13 Sep 2003; <plasmaroo@gentoo.org> files/gentoo-sources-2.4.20-gcc33.patch:
  Added more GCC3.3 fixes

*gentoo-sources-2.4.20-r7 (11 Sep 2003)

  11 Sep 2003; <plasmaroo@gentoo.org> gentoo-sources-2.4.20-r7.ebuild,
  files/gentoo-sources-2.4.20-gcc33.patch:
  Added GCC3.3 compatibility patch.

  08 Sep 2003; Martin Holzer <mholzer@gentoo.org>
  gentoo-sources-2.4.19-r10.ebuild, gentoo-sources-2.4.20-r5.ebuild,
  gentoo-sources-2.4.20-r6.ebuild:
  SRC now uses mirror://kernel

*gentoo-sources-2.4.20-r6 (08 Aug 2003)

  08 Aug 2003; Daniel Ahlberg <aliz@gentoo.org> gentoo-source-2.4.20-r6.ebuid :
  Apply a bunch of security fixes.

*gentoo-sources-2.4.20-r5 (10 May 2003)

  10 May 2003; Jay Pfeifer <pfeifer@gentoo.org> gentoo-sources-2.4.20-r5.ebuild:
  Package is currently marked stable (x86).
  Changes:
  * Added Barton SSE suport
  * Minor documentation fixes
  * Fixed USAGI issue
  * Other things I am forgetting to mention :)

*gentoo-sources-2.4.20-r4 (08 May 2003)

  08 May 2003; Jay Pfeifer <pfeifer@gentoo.org> gentoo-sources-2.4.20-r4.ebuild:
  Package is currently marked stable (x86).
  Changes:
  * Added a few updates for ck6
  * Updated SuperFreeS/WAN to 1,99,7rc2
  * Updated to patch-o-matic from 01May2003 lotsa new goodies
  * Updated USAGI to 28Apr2003 snapshot
  * Made USAGI installable by a USE flag 'USAGI'
    - if you use USAGI, you *cannot* use {freeswan/patch-int/loop-jari}
    - the ebuild will drop either/or depending on your use flags :)
  * Updated adaptec 79xxx to 01May2003
  * Updated ntfs to 2.1.4a
  * Updated grsecurity to 1.99g
  * Added initial support for systrace v1.2
  * Updated bluetooth support fro MH to 2.4.20-MH7
  * Added kraxel patch which is v4l2 & other updates - see the docs
  * Fixed broken gcc optimizations... the overoptimization was breaking things
  * Added support for ipvs
  * Added support for usbvision
  * Added vesafb fix
  * Added imq support & the ipv4 & ipv6 imq ipt patches
  * Updated Wireless Extensions to WE-15
  * Updated evms2 stuff to version 2.0.1
  * Fixed another small grsec/rmap issue + added a grsec hardlink fix
  * Added some jfs 1.1.2 fixes
  * Added usb scanners update from 16Apr2003
  * Added some minor grsecurity fixes
  * Other things I am forgetting to mention :)

*gentoo-sources-2.4.20-r3 (15 Apr 2003)

  15 Apr 2003; Jay Pfeifer <pfeifer@gentoo.org> gentoo-sources-2.4.20-r3.ebuild:
  Package is currently marked unstable (~x86).
  * Added latest ck (12Apr2003) - thank you Con Kolivas!
  * Added support for either rmap(default) or aavm (your choice)
  * Added support for evms 2.0 (user selects 1.2.1 or 2.0). evms 1.2.1 default.
  * If you are thinking about using evms 2.0 - READ the DOCS!!! <-- Warning!
  * Added support for nforce2 ide & audio... (thanks alron & alain)
  * ext3 fixes
  * jfs fixes - 1.1.1 + xattr & acl
  * update ntfs to 2.1.2a
  * grsecurity bumped to 1.9.9f (this contains the ptrace fix)
  * SuperFreeS/WAN up to 1.9.6.1
  * updated to ea+acl+nfsacl 0.8.56
  * Readded missing ciphers from patch-int
  * Removed safe serial driver from usbdnet
  * Added bootsplash 3.0.7
  * Fixed a number of USAGI issues (but some still remain).
  * Updated adaptec 79xx to 18Mar2003 version (thanks livewire)
  * Added backported bluetooth support from MH
  * Other things I am forgetting to mention

*gentoo-sources-2.4.20-r2 (19 Mar 2003)
  
  21 Mar 2003; Jay Pfeifer <pfeifer@gentoo.org> gentoo-sources-2.4.20-r2.ebuild:
  * Added ebuild note of lack of xfs support (use xfs-sources for xfs)

  19 Mar 2003; Jay Pfeifer <pfeifer@gentoo.org> gentoo-sources-2.4.20-r2.ebuild:

  * Added ptrace security fix.
  * Process priorities are now obeyed. :)
  * pom updated to 20030310
  * removed aavm
  * removed ck4 O(1) sched, ll, preempt patch
  * added rml preempt & ll
  * update xattr+acl to xattr+acl+trusted 0.8.55
  * update usbdnet
  * add dac960 root fix
  * add sim710 compile fix

*gentoo-sources-2.4.20-r1 (12 Jan 2003)

  27 Feb 2003; Brandon Low <lostlogic@gentoo.org> gentoo-sources-2.4.20-r1.ebuild:
  Move to stable

  Ebuild Changes
  * Dropped the *3c509-fix
  * Dropped the *tcp-window-tracking
  * Drop gcc-3.1 patch if not on gcc3
  * Also make prettier output for the USE var controlled
    patches
  * Add a warning about maybe needing to rebuild iptables

  Features of this kernel:
  * Based heavily on ck-sources-2.4.20-r2 (linux-2.4.20-ck2)

    From CK:
  * O(1) Scheduler
  * Low-latency scheduling
  * Preempt
  * Read-latency 2
  * Reverse mapping VM
  * Supermount
  * ACPI update
  * Variable HZ (automatically tuned afaik)

    From elsewhere:
  * 3.5G Address space
  * xattr+acl support
  * TIOCGDEV support
  * Grsecurity-1.9.8-rc2
  * ACLs for JFS
  * Optimizations for GCC3 compilation
  * EVMS 1.2.1
  * Additional Tekram SCSI Support
  * KT400 pci.ids thanks to viz
  * NTFS-tng 2.10a
  * Support for the ECC driver
  * Video 4 Linux v2 API
  * MPPE support
  * i2c-2.7.0
  * Inode Monitor support
  * Support for kernel config on /proc/config
  * Updated support for aic7xxx SCSI cards
  * Ext3 data=journal fix.
  * Fix for 3c509
  * Synced with almost all of the iptables patch-o-matic base
  * XFS optional useflag with a warning about JFS
    xfs+quota-v2+kdb support many thanks to dragon
  * Encrypted loopback support (loop-jari)
  * CryptoAPI support from www.kerneli.org
  * Super Free S/WAN
  * Quick bugfixes
  * Defconfig with some reasonable stuff for this kernel
    on gentoo
  * Gentoo fb-logos

  17 Dec 2002; Brandon Low <lostlogic@gentoo.org>:
  Make all kernel-sources SLOT="${KV}"

  06 Dec 2002; Rodney Rees <manson@gentoo.org> : changed sparc ~sparc keywords
 
  07 Dec 2002; Brandon Low <lostlogic@gentoo.org> gentoo-sources-2.4.19-r10.ebuild gentoo-sources-2.4.19-r9.ebuild:
  Add fix for i810_drm compilation, this should make people nice and
  happy :). (as shown above this is for -r10 and -r9

  16 Nov 2002; Brandon Low <lostlogic@gentoo.org> gentoo-sources-2.4.19-r10.ebuild gentoo-sources-2.4.19-r9.ebuild:
  Add fix for lcall-DoS from lkml.

*gentoo-sources-2.4.19-r10 (06 Oct 2002)

  06 Oct 2002; Brandon Low <lostlogic@gentoo.org> gentoo-sources-2.4.19-r10.ebuild:

  While testing this kerenl I ran into very bad crashing behavior with 
  the USE="acpi4linux" option enabled... just a warning.  But for you
  laptopers it is still there.

  Well I dug up about 3-4 hours of time and merged xfs into this kernel
  so everyone who has been asking for it finally gets their way because
  I hate being unpopular.  I hope you all enjoy XFS, it is enabled by a
  hidden useflag so set USE="xfs" to turn it on for this kernel.  Please
  let me know your results.  Apparently with these patches enabled, JFS
  causes corruption due to some strange interrraction.  If you use JFS
  and XFS use xfs-sources-2.4.19-r2 please.

  New in this release:
  - Dropped ext3-htree due to corruption with current e2fsprogs
    this may bite some of you who are already using it, but
    hopefully it will be updated before you need to fsck your
    partitions a lot.
  - Update EVMS
  - Update JFS
  - Fix for grsecurity compilation
  - Update patches.txt documentation and kernel.eclass (makes older
    a little funky, but is more forward working)
  - Fix processor type options to show gcc>31 rather than gcc31
  - Add futexes support
  - Add imon support
  - Optional XFS patch just set USE="xfs"
  - Optional ACPI patch just set USE="acpi4linux"
  - Redone ebuild setup now we have an eclass for these things
  - Rename some patches to better names for use with KERNEL_EXCLUDE
  - Add support for KERNEL_EXCLUDE
  - Add and re-arrange VIA bugfixes
  - Update grsecurity
  - Switch to latest release IPSEC Free S/WAN
  - Add usbdnet support for Zaurus handhelds
  - Updated preempt
  - Updated rmap
  - Add xattr and acl patches and include the JFS patches for them.
  - Add supermount patches.
  - Incorportate the small fixes done to gentoo-sources-2.4.19-r9

*gentoo-sources-2.4.19-r9 (03 Sep 2002)

  04 Sep 2002; Brandon Low <lostlogic@gentoo.org> gentoo-sources-2.4.19-r9.ebuild:

  Add 2 line patch to fix compilation with HIGHMEM

  03 Sep 2002; Brandon Low <lostlogic@gentoo.org> gentoo-sources-2.4.19-r9.ebuild:

  Whole new kernel patching methodology and new kernel.  

  I won't mark what has changed as that would be impossible,
  instead read /usr/share/doc/gentoo-sources-2.4.19-r9/patches.txt.gz
  for information about all the patches in this kernel.

*gentoo-sources-2.4.19-r8 (20 Aug 2002)

  20 Aug 2002; Michael Cohen <mjc@gentoo.org>
  new kernel with sys-kmod/$foo.  needs to have sparc* and ppc tested.

*gentoo-sources-2.4.19-r7 (09 Jul 2002)

  15 Jul 2002; Mark Guertin <gerk@gentoo.org>
  Added arch keywords (-ppc -sparc -sparc64)

  09 Jul 2002; Daniel Ahlberg <aliz@gentoo.org> ChangeLog :

  Added ChangeLog.
