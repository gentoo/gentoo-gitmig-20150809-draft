# https://bugs.eclipse.org/bugs/show_bug.cgi?id=165097
--- make_linux.mak.old	2006-11-19 18:11:38.000000000 +0200
+++ make_linux.mak	2006-11-19 18:20:00.000000000 +0200
@@ -52,7 +52,7 @@
 
 CDE_LIBS = -L$(CDE_HOME)/lib -R$(CDE_HOME)/lib -lXt -lX11 -lDtSvc
 
-AWT_LIBS = -L$(AWT_LIB_PATH) -ljawt -shared -s
+AWT_LIBS = -L$(AWT_LIB_PATH) -ljawt -shared
 
 ATKCFLAGS = `pkg-config --cflags atk gtk+-2.0`
 ATKLIBS = `pkg-config --libs-only-L atk gtk+-2.0` -latk-1.0 -lgtk-x11-2.0
@@ -80,7 +80,7 @@
 	-I$(JAVA_HOME)/include \
 	-I$(JAVA_HOME)/include/linux \
 	${SWT_PTR_CFLAGS}
-MOZILLALIBS = -shared -s -Wl,--version-script=mozilla_exports -Bsymbolic
+MOZILLALIBS = -shared -Wl,--version-script=mozilla_exports -Bsymbolic
 	
 SWT_OBJECTS = swt.o callback.o
 CDE_OBJECTS = swt.o cde.o cde_structs.o cde_stats.o
@@ -103,8 +103,13 @@
 		-I$(JAVA_HOME)/include/linux \
 		-fPIC \
 		${SWT_PTR_CFLAGS}
-LIBS = -shared -fPIC -s
+LIBS = -shared -fPIC
 
+ifndef NO_STRIP
+	AWT_LIBS := $(AWT_LIBS) -s
+	MOZILLALIBS := $(MOZILLALIBS) -S
+	LIBS := $(LIBS) -s
+endif
 
 all: make_swt make_atk make_gnome make_glx
 
