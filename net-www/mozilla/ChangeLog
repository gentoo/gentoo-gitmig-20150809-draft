# ChangeLog for net-www/mozilla
# Copyright 2002-2003 Gentoo Technologies, Inc.; Distributed under the GPL v2
# $Header: /var/cvsroot/gentoo-x86/net-www/mozilla/ChangeLog,v 1.92 2003/04/18 01:43:58 foser Exp $

  18 Apr 2003; foser <foser@gentoo.org> mozilla-1.3-r1.ebuild :
  Fixed xft dep to be virtual

  10 Apr 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.3-r1.ebuild :
  Change permissions on compreg.dat in hope to fix bug #19034.

  30 Mar 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.3-r1.ebuild :
  Seems like the mail component have issues if the composer is disabled,
  so only disable if we disable mail.

*mozilla-1.3-r1 (22 Mar 2003)

  22 Mar 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.3-r1.ebuild :
  Add Gtk2 patch.  Add default/prefs/xft.js when Xft is enabled.  Some other
  long overdue cleanups.

*mozilla-1.3 (18 Mar 2003)

  21 Mar 2003; Jay Kwak <jayskwak@gentoo.org> mozilla-1.3.ebuild :
  Add XIM input patch for GTK
  
  18 Mar 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.3.ebuild :
  New version.

  13 Mar 2003; Olivier Reisch <doctomoe@gentoo.org> mozilla-1.2.1-r5.ebuild :
  Marked ppc stable

*mozilla-1.3_beta (23 Feb 2003)

  23 Feb 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.3_beta.ebuild :
  New version.

*mozilla-1.2.1-r5 (19 Jan 2003)

  04 Mar 2003; Jason Wever <weeve@gentoo.org> mozilla-1.2.1-r5.ebuild:
  Changing ~sparc to sparc as this works well, has no reported bugs, and the
  current stable mozilla (1.0.1-r3) breaks during compile.

  29 Jan 2003; Jack Morgan <jmorgan@gentoo.org> mozilla-1.2.1-r*.ebuild :
  Fixed replace-flags 

  19 Jan 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r5.ebuild :
  Fix a memory leak when reloading images:
 
    http://bugs.gentoo.org/show_bug.cgi?id=13667
    http://bugzilla.mozilla.org/show_bug.cgi?id=179498
  
  09 Jan 2003; Jack Morgan <jmorgan@gentoo.org> mozilla-1.2.1-r4.ebuild :
  Added sparc support with replace-flags (bug #13554 - thanks to Kumba)

  09 Jan 2003; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r4.ebuild :
  We set -O in ./configure to -O1, as -O2 cause crashes on startup ...
  (bug #13287)

*mozilla-1.2.1-r4 (26 Dec 2002)

  26 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r4.ebuild :
  Same as last -r3, just created to make sure we have all the fixes, and
  marked stable for x86.

  26 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :
  Update google search plugin, closing bug #10605.
  Fix my braindead stuff up with the "WANT_GTK2" fix of yesterday.

  25 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :
  Add pkg_setup() to not build with gtk2 support if the user did not export
  WANT_GTK2="yes".  I did this due to the multitude of problems with gtk2
  support (plugins do not work, crashes, etc).

  23 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :
  Some cleanups for the java-config stuff in an effort to resolve bug #12610.

  17 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :
  Update mozilla-1.2.1-Xrender-includes.patch.bz2 to hopefully (?) fix #12223.

  16 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :
  Update mozilla-1.2.1-Xrender-includes.patch.bz2 to truely fix #12223.

  16 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :
  Currently --enable-elf-dynstr-gc only works for x86 and ppc, thanks
  to Jason Wever <weeve@gentoo.org> for the fix.

*mozilla-1.2.1-r3 (16 Dec 2002)

  16 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r3.ebuild :

  Fix include problem with Xrender if the updated headers are not installed
  system wide.  Should close bug #12223.

  15 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r2.ebuild :

  Add missing dirs for Xrender includes and libs.

*mozilla-1.2.1-r2 (14 Dec 2002)

  15 Dec 2002; Martin Holzer <mholzer@gentoo.org> mozilla-1.2.1-r2.ebuild :
        
  Fixed SRC_URI for the patch.


  14 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r2.ebuild :

  Update to use fontconfig-2.1 tarball (Xft2.0.1, bugfixed Xrender).  Modify
  Xft and Xrender to install libXft_moz.so* and libXrender_moz.so*, and mozilla
  to link to those.  This should hopefully fix bugs where mozilla do not start.

  09 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r1.ebuild :

  Just add more checks to see if we should apply patches/whatever that are
  Xft2.0 related.  Fix NSS headers that was not all installed ...

  06 Dec 2002; Rodney Rees <manson@gentoo.org> : changed sparc ~sparc keywords
 
*mozilla-1.2.1-r1 (08 Dec 2002)

  15 Dec 2002; Martin Holzer <mholzer@gentoo.org> mozilla-1.2.1-r1.ebuild :
        
  Fixed SRC_URI for the patch.


  08 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1-r1.ebuild :

  Add 'moznoxft' USE flag, closing bug #11680.  Remove cutnpaste-limit-fix
  patch, as it seems flaky with 1.2.1.  Remove '--disable-jsd' configure
  flag, as it disabled venkman.

  05 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1.ebuild :

  Add pango-1.1 detection back to Xft detection if 'gtk2' in USE, else
  mozilla segfaults, as its linked to both Xft1.1 and Xft2.0.

  Fix digest again.  Hope mozilla devs dont make changing the tarball a
  habit ..

  Seems gcc-3.2.1 is not stable enouth yet to handle -march=pentium4, so
  change pentium4 to pentium3 again for all gcc3's

*mozilla-1.2.1 (05 Dec 2002)

  05 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.1.ebuild :

  Update version.

  04 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.ebuild :

  Also add Xft2.0 to pango-1.1 check, possibly fixing bug #11576.

  Add inherit flag-o-matic to 1.0-r3 and 1.1-r1, closing bug #11584.

  02 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.ebuild :

  Change --with-extensions to --enable-extensions.  Add "mznoirc"
  USE flag.  This closes 11452.

  02 Dec 2002; Maik Schreiber <blizzy@gentoo.org> files/digest-mozilla-1.2:
  Fixed digest.  This closes bug #11427.

  02 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.ebuild :

  Mozilla people updated the tarball, so no need for the branch update.
  Add get_number_of_jobs() stuff, thanks to nall <nall@gentoo.org>.

  01 Dec 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.ebuild :

  Do not disable Xft for gtk2, as we depend on gtk+-2.1 (hopefully we
  can get this into portage real soon).  Comment out calendar stuff
  for now.

*mozilla-1.2 (30 Nov 2002)

  30 Nov 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2.ebuild :

  New version.  People that use DHTML should rather avoid this version, as
  its broken in 1.2:
   
    http://slashdot.org/article.pl?sid=02/11/30/0029226

  This should resolve bugs #11285 and #11395.

  21 Nov 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2_beta.ebuild :

  Add pkgconfig to DEPEND, closing bug #11036.

  20 Nov 2002; Martin Schlemmer <azarah@gentoo.org> *.ebuild :
  
  Change to new shared nsplugin scheme, bug #10056.  Add strip-flags,
  closing bug #10772.

  19 Nov 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2_beta.ebuild :

  Add DEPEND on !gtk2? dev-libs/libIDL, closing bug #10955.

  19 Nov 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2_beta.ebuild :

  Do not enable Xft2.0 if we are building with gtk2, as it causes mozilla to
  segfault do to it being linked to libXft.so.1.1 *and* libXft.so.2.0.

  Change the perl sed's for mozilla-config and pkgconfig files to use $MY_PV2
  and *not* $PV.

*mozilla-1.2_beta (18 Nov 2002)

  18 Nov 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.2_beta.ebuild :

  New version of 1.2b.  This adds Xft2.0 support without having to install
  Xft2.0 (and possibly break other things), as Xft2.0 is build with mozilla
  and installed in /usr/lib/mozilla.  Hope this makes up for the long wait :)
  Thanks to Jelmer Jaarsma <dis-k@diska.dyndns.org> (bug #9319) for the
  gtk2 patch.

*mozilla-1.0.1-r3 (12 Nov 2002)

  15 Dec 2002; Martin Holzer <mholzer@gentoo.org> mozilla-1.0.1-r3.ebuild :

  Fixed SRC_URI for the patch.

  18 Nov 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.0.1-r3.ebuild :

  Mark as stable.

  12 Nov 2002; Martin Schlemmer <azarah@gentoo.org> :

  Update some patches from Redhat.  Disable short-wchar.  Disable libmng.
  Disable xprint.  All these to try and stabilize things a bit.  Test seem
  better.

*mozilla-1.0.1-r2 (19 Oct 2002)

  24 Oct 2002; Seemant Kulleen <seemant@gentoo.org> mozilla-1.0.1-r2.ebuild :

  Added a patch to remove reading the PLATFORM environment variable as this
  broke compilation on sparc64.  This patch was provided by:
  wtc@netscape.com (Wan-Teh Chang) in this bug report:
  http://bugzilla.mozilla.org/show_bug.cgi?id=174143 as it is an upstream
  bugfix.

  19 Oct 2002; Martin Schlemmer <azarah@gentoo.org> :
  Add the abi-compat patch back, thanks to Tony Clark.

  18 Oct 2002; Seemant Kulleen <seemant@gentoo.org> :
  Add an ABI fix for sparc/sparc64 gcc-3.x based systems.

  17 Oct 2002; Martin Schlemmer <azarah@gentoo.org> :
  Add a fix for bug #7656.  This fix the missing headers from
  X11/extensions/ in the X include dir.

  13 Oct 2002; Martin Schlemmer <azarah@gentoo.org> :
  Add five patches from Mandrake (actually for moz-1.1 that I hacked
  to work for 1.0.1) that fixes various crashes.  This seems to fix
  the "crash on form submit bug" (bug #4715).

*mozilla-1.0.1-r1 (03 Oct 2002)
  03 Oct 2002; Martin Schlemmer <azarah@gentoo.org> :
  Remove '--disable-dtd-debug' from configure, as it seems
  to fix the unstability in mozilla.  Bug #4715 related.

*mozilla-1.0.1 (28 Sep 2002)
  28 Sep 2002; Martin Schlemmer <azarah@gentoo.org> :
  New version.

*mozilla-1.1-r1 (7 Sep 2002)
  9 Sep 2002; Spider <spider@gentoo.org> mozilla-1.1-r1.ebuild :
  added the patch to make galeon cvs head build with "use gtk2" 

  
  7 Sep Martin Schlemmer <azarah@gentoo.org> mozilla-1.1-r1.ebuild :

  Install pkgconfig files (*.pc).  This should resolve bug #7571.

*mozilla-1.1 (30 Aug 2002)

  30 Aug 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.1.ebuild :

  Update version.  Also cleaned up the build some what.  Gtk+-2.0 support
  seems usable for a change, and it also installs mozilla-remote-client,
  thus our script will open additional URL's in the same session for
  gtk2 version.

  Added Enigmail support if "crypt" in USE, and the mail addon is built,
  thanks to J Robert Ray <jrray@jrray.org>, closing bug #7149.

  27 Aug 2002; Wout Mertens <wmertens@gentoo.org> mozilla-1.1_beta :

  Changed install so that the emerge process needs rougly 80MB harddisk space
  less. (Which brings it down to a mere 550MB :) ) Only applied to the beta
  because I don't want to break stuff unintentionally, but it should work for
  the 1.0 ebuilds as well. Feel free to add it to them.

  11 Aug 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-{1.0-r3,1.1_beta} :

  Update DEPEND to use portage-2.0.14 or later.

  30 Jul 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-{1.0-r3,1.1_beta} :

  Some gcc-3 fixes for pentium 4.

  02 Aug 2002; Mark Guertin <gerk@gentoo.org> mozilla-{1.0-r3,1.1_beta} :
  Added PPC ABI gcc 3.1 patches by Franz Sirl, see url for details
  http://bugzilla.mozilla.org/show_bug.cgi?id=142594
  Tested on gcc 3.2_pre PPC ok w/ 1.0 and 1.1a (there is no 3.1.x ppc setup)

*mozilla-1.1_beta (30 Jul 2002)

  30 Jul 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.1_beta :
  Enable the mozilla-1.0-asm-fixes.patch again, as it fixes some
  build problems with gcc-3.x.

*mozilla-1.0-r4 (25 Jul 2002)
  25 Jul 2002; Spider <spider@gentoo.org> mozilla-1.0-r4.ebuild:
  minor changes to the build process, uses experimental makeedit.eclass
  this version shouldn't be unmasked except for testing, as it doesn't do
  anything constructive except make the build a bit leaner and smaller in
  RAM requirements. 

  13 Jul 2002; Martin Schlemmer <azarah@gentoo.org> mozilla.sh :
  Update to fix a bug with gtk2 (mozilla-xremote-client are not created).
  This cause mozilla not to run, or some wierd stuff in the browser window.
  Should close bug #4758.

*mozilla-1.0-r3 (7 Jul 2002)

  14 Jul 2002; Daniel Ahlberg <aliz@gentoo.org> mozilla-1.0-r3.ebuild :
  Added KEYWORDS.

  7 Jul 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.0-r3 :
  Add gcc-3.1.1 support.  Add support for at least the flash and realmedia
  plugins.  Add gtk2 support.

  26 Jun 2002; Martin Schlemmer <azarah@gentoo.org> :
  Add support to set NO_MAIL=YES to disable the mail and news components.
  This hopefully resolves bug #3575.

*mozilla-1.0-r2 (7 Jun 2002)

  14 Jul 2002; Daniel Ahlberg <aliz@gentoo.org> mozilla-1.0-r2.ebuild :
  Added KEYWORDS.
  7 Jun 2002; Spider <spider@gentoo.org> :
  modify the gtk+ dependencies. we dont want gtk2 deps just yet.

   
*mozilla-1.0-r2 (6 Jun 2002)
  6 Jun 2002; Martin Schlemmer <azarah@gentoo.org> :
  Add xfree-4.2.0-r11 suppport.

*mozilla-1.0-r1 (5 Jun 2002)
  5 Jun 2002; Martin Schlemmer <azarah@gentoo.org> :
  The 1.0_rc3-r5* adds gtk+-2.0 support, but breaks galeon, nautilus
  and co.

*mozilla-1.0 (5 Jun 2002)
  5 Jun 2002; Brandon Low <lostlogic@gentoo.org> :
  Took 1.0_rc3-r51 and made it 1.0 werksferme, give it a try!

*mozilla-1.0_rc3-r50 (31 May 2002)
  01 May 2002; Martin Schlemmer <azarah@gentoo.org> :
  Add all my comments and stuff back.  Great work Spider!, but
  some of these are bookmarks, etc.

*mozilla-1.0_rc3-r50 (31 May 2002)
  31 May 2002; Spider <spider@gentoo.org> :
  very experimental gtk2 version of mozilla. Handle with care.
  will break galeon 1!

*mozilla-1.0_rc3-r2 (28 May 2002)

  28 May 2002; Martin Schlemmer <azarah@gentoo.org> :

  Update to compile with freetype-2.0.9.

*mozilla-1.0_rc{2,3}-r1 (26 May 2002)

  29 May 2002; Wout Mertens< wmertens@gentoo.org> digest-mozilla-1.0_rc3-r1:

  Committed new digest, since it seems the tarball changed

  26 May 2002; Martin Schlemmer <azarah@gentoo.org> :

  Added dev-libs/expat to DEPEND, resolves bug #3033.

*mozilla-1.0_rc3 (24 May 2002)

  24 May 2002; William McArthur <sandymac@gentoo.org> mozilla-1.0_rc3.ebuild:

  Updated to 1.0rc3. (Simply bumped the ebuild filename.

*mozilla-1.0_rc2 (13 May 2002)

  13 May 2002; Arcady Genkin <agenkin@thpoon.com> mozilla-1.0_rc2.ebuild:

  Updated to 1.0rc2.

*mozilla-1.0_rc1-r1 (1 May 2002)

  1 Apr 2002; Martin Schlemmer <azarah@gentoo.org> mozilla-1.0_rc1-r1.ebuild :

  Added XFT support.

  27 Apr 2002; pvdabeel <pvdabeel@gentoo.org> :

  ppc(/sparc) fix 0.9.9 and 1.0-rc1
  older ebuild should be masked out or fixed

  24 Apr 2002; M.Schlemmer <azarah@gentoo.org> :

  Slotted the latest ones.

  13 Apr 2002; M.Schlemmer <azarah@gentoo.org> mozilla-0.9.9-r[12].ebuild :

  Disable xterm updating.  Hopefully this will fix the "beep" during console
  problem.

*mozilla-0.9.9-r2 (12 Apr 2002)

  12 Apr 2002; Spider <spider@gentoo.org>
  Update all glib dependencies to use glib-1.2*  in preparation of
  unmasking the glib-2.0.1 packages. Update libpng dependency

  20 Mar 2002; Chad Huneycutt <chadh@gentoo.org> mozilla-0.9.9-r1.ebuild :
  -changed virtual jdk depend to virtual/jre-r1 per karltk's advice for new
  java-config functionality
  -added java-config to DEPEND

  15 Feb 2002; M.Schlemmer <azarah@gentoo.org> mozilla-0.9.8-r3.ebuild :

  Hopefully fix package building dud mozilla binary.  Further fixes to stale
  components and chrome problem.

*mozilla-0.9.8-r2 (7 Feb 2002)

  7 Feb 2002; M.Schlemmer <azarah@gentoo.org> mozilla-0.9.8-r2.ebuild :

  Rip out libtimer_gtk.so source again, as we just do not need it around
  when generating components.reg.  Add support for ebuild to remove 
  libtimer_gtk.so if it is around.

*mozilla-0.9.8-r1 (6 Feb 2002)

  6 Feb 2002; M.Schlemmer <azarah@gentoo.org> mozilla-0.9.8-r1.ebuild :

  Add source for missing libtimer_gtk.so library (timer-0.9.7.tar.bz2).

*mozilla-0.9.7-r2 (3 Feb 2002)

  3 Feb 2002; M.Schlemmer <azarah@gentoo.org> mozilla-0.9.7-r2.ebuild :

  Add ${FILESDIR}/mozilla-0.9.7-post.patch to fix a bug in the current version
  of mozilla not posting forms in all cases.  Resolves bug #349.

*mozilla-0.9.7-r1 (1 Feb 2002)

  1 Feb 2002; G.Bevin <gbevin@gentoo.org> ChangeLog :
  
  Added initial ChangeLog which should be updated whenever the package is
  updated in any way. This changelog is targetted to users. This means that the
  comments should well explained and written in clean English. The details about
  writing correct changelogs are explained in the skel.ChangeLog file which you
  can find in the root directory of the portage repository.
