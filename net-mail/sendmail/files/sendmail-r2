#!/sbin/runscript
# Copyright 1999-2003 Gentoo Technologies, Inc.
# Distributed under the terms of the GNU General Public License, v2 or later
# $Header: /var/cvsroot/gentoo-x86/net-mail/sendmail/files/sendmail-r2,v 1.2 2003/02/14 23:04:29 vapier Exp $

. /etc/conf.d/sendmail

depend() {
	need net
	use logger
}

start() {
	ebegin "Starting sendmail"
	/usr/bin/newaliases > /dev/null 2>&1
	(cd /var/spool/mqueue; rm -f xf*)
	/usr/sbin/sendmail ${SENDMAIL_OPTS} > /dev/null 2>&1
	/usr/sbin/sendmail ${CLIENTMQUEUE_OPTS} > /dev/null 2>&1
	eend $?
}

stop() {
	ebegin "Stopping sendmail"
	kill -9 `sed -n -e '1p' ${PIDFILE}`
	kill -9 `sed -n -e '1p' ${CM_PIDFILE}`
	eend $?
}
