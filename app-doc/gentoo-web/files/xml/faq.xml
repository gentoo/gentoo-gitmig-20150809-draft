<?xml version='1.0'?>
<guide link="/doc/faq.html">
<title>Gentoo Linux Frequently Asked Questions</title>
<author title="Editor"><mail link="thomasfl@gentoo.org">Thomas Flavel</mail></author>
<author title="Chief Architect"><mail link="drobbins@gentoo.org">Daniel Robbins</mail></author>

<abstract>This FAQ is a collection of questions and answers collected from the gentoo-dev mailing list and from IRC -- if you have any questions (or answers!) to add, please contact an author.</abstract>

<version>1.0.6</version>
<date>17 Oct 2001</date>

<chapter>
	<title>Getting Started</title>

	<section>
		<title>How is Gentoo pronounced, and what does it mean?</title>
		<body><p>Gentoo is a species of small fast penguin, pronounced "jen-two".</p></body>
	</section>

	<section>
		<title>What makes Gentoo different?</title>
		<body>
			<p>Gentoo Linux is a fast, modern distribution with a clean and flexible design -- in this respect, Gentoo may appeal to <uri link="http://www.slackware.com/">Slackware</uri>, <uri link="http://www.linuxfromscratch.org">Linux From Scratch</uri> or <uri link="http://www.bsd.org">BSD</uri> users. Unlike most Linux distros, Gentoo has a package system reminscient of BSD's ports, meaning the packages are continually updated to the lastest versions.</p></body> 
	</section>
</chapter>

<chapter>
	<title>Installation</title>

	<section>
		<title>What is the differenence between the sys and build tarballs?</title>
		<body><p>The <e>build</e> tarball is a minimal system capable of connecting to the internet and rebuilding itself, whereas <e>sys</e> is a complete comfortable system.</p>
	</body>
	</section>

	<section>
		<title>How do I install with no ISO image?</title>
		<body><p>We are working out a solution for 1.0_rc6+ systems as we speak.  Stay tuned and visit the <uri
link="/index-download.html">Download/Install page</uri> for updates.</p> 
	</body>
	</section>

	<section>
		<title>I have a Sony Super-Slim VAIO laptop, and the Gentoo Linux CD is having problems finding my PCMCIA ATAPI CD-ROM.</title>
		<body>
		<p>Make sure the second IDE port is set to CDROM (it unsets itself if the device isn't attached on boot) then do the following at the isolinux <c>boot:</c> prompt:</p>
<pre>
boot: <i>rescue ide2=0x180,0x386</i>
</pre>
<p>If you are using a 1.0_rc5 or earlier boot CD, type <c>gentoo</c> instead of <c>rescue</c>, above.</p>
</body>
</section>
	<section>
		<title>I'm finding things to be really unstable and I'm using "-O9 -ffast-math -fomit-frame-pointer" optimizations.  What gives?</title>
		<body>
		<p>When you use any optimizations beyond <c>-O3</c>, you're really taking the risk of having broken packages.
		Very aggressive optimizations sometimes cause the compiler to streamline the assembly code to the point where
		it doesn't quite do the same thing anymore.  <e>Loc-Dog</e> (on IRC) uses <c>-O3 -mcpu=1686 -march=i686 -fforce-addr -fomit-frame-pointer -funroll-loops -frerun-cse-after-loop -frerun-loop-opt -malign-functions=4</c>, which is about
		as much as I'd want to push global optimization settings.  Beyond this, it's best to use ultra-high optimizations
		only with specific packages where you really need that extra 2%, and where you can easily test the package 
		to ensure that it hasn't been optimized into oblivion.</p>
		</body>
	</section>

	<section>
		<title>What's the default root password after installation?</title>
		<body><p>The default password is blank; hit enter.</p></body>
	</section>

	<section>
		<title>Why can't a user su to root?</title>
		<body><p>For security reasons, users may only <c>su</c> to root if they belong to the <e>wheel</e> group. To add a <i>username</i> to the <e>wheel</e> group, issue the following command as root:</p>
		<pre># <i>usermod -G users,wheel username</i></pre>
</body>
	</section>
	<section>
		<title>How do I enable devfs?</title>
		<body>
<p>
<e>devfs</e> support is compiled-in to our standard kernels, and is enabled by default on Gentoo Linux 1.0_rc5 and above.  If you're using 1.0_rc5 or greater, you don't need to do anything special to get devfs working; it's already active.  However, if you are using a version of Gentoo Linux <e>prior</e> to version 1.0_rc5, add <c>devfs=mount</c> to your <c>GRUB</c> kernel boot options so that the line looks something like <c>kernel /boot/boot/bzImage devfs=mount foo=bar</c>  The kernel will then mount the <path>/dev</path> <e>devfs</e> filesystem automatically at boot-time.
</p>
	</body>
	</section>
	<section>
		<title>How to I disable devfs?</title>
		<body>
<p>Under Gentoo Linux 1.0_rc6 and later, you can disable devfs by passing the <c>gentoo=nodevfs</c> to the kernel.  Please
note that this works even if you are using "non-official" Linux kernel that you compiled yourself.</p>
		</body>
	</section>
<section>
		<title>How do I get <path>/dev/dsp</path>?</title>
		<body><p>You can create it by typing the following as root:</p>
		<pre># <i>cd /dev</i>
# <i>./MAKEDEV audio</i></pre></body>
	</section>
	<section>
		<title>How do I get a <path>/dev/mouse </path> that
		doesn't go away when I reboot?</title>
		<body>
		<p>You need to edit <path>/etc/devfsd.conf</path>
		and add these lines:</p>
<pre>
REGISTER        ^misc/psaux$    CFUNCTION GLOBAL symlink misc/psaux mouse
UNREGISTER      ^misc/psaux$    CFUNCTION GLOBAL unlink mouse
</pre>
<p>If you are not using the devfs PS/2 mouse <path>/dev/misc/psaux</path> device,
adjust the <c>misc/psaux</c> strings above accoringly.  You'll then want to <c>killall -HUP devfsd</c>
		to get devfsd to reread <path>/etc/devfsd.conf</path>.</p>
		</body>
	</section>
	<section>
		<title>Grub can't find stage x.y?</title>
		<body><p>
		During installation the grub boot files are copied
		to <path>/boot/grub</path> (<path>/boot/boot/grub</path> in Gentoo Linux 1.0_rc5 and earlier.) Grub automatically
		looks in the <path>/boot/grub</path> directory on the
		boot partition.  (We strongly recommend having a separate
		no-auto boot partition mounted at <path>/boot</path>,
		since that way it is much more difficult to clobber your
		kernel and boot info by accident.)  The above error generally
		arises from (a) not using a separate boot partition, (b)
		forgetting to mount the boot partition at <path>/boot</path>
		before either unpacking the build snapshot or running
		<c>emerge --usepkg system</c>, or (c) forgetting the
		<c>notail</c> option when mounting <path>/boot</path>.
		You can get more information on grub, including how to
		debug grub from the grub prompt, by reading the 
		<uri link="http://www-105.ibm.com/developerworks/education.nsf/linux-onlinecourse-bytitle/0F1731DC664023B7862569D0005C44AF?OpenDocument">IBM developerWorks Grub tutorial</uri>.
		</p>
                </body>
	</section>
	<section>
		<title>I'm getting ALSA errors -- "mixer #/# not found", etc.</title>
		<body>
		<p>Your ALSA sound devices need to be set up correctly.  To do this, grab <uri link="/scripts/snddevices">our updated snddevices script</uri> and execute it by typing <c>bash snddevices</c>.  This will configure the ALSA devices correctly, and these errors should go away and ALSA should now work.</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>Package Management</title>
	<section>
		<title>In what format are the packages stored?</title>
		<body><p>They exist in our portage tree as <e>ebuild</e> autobuild scripts; we are primarily a ports-based distribution, meaning that we provide scripts (<c>.ebuild</c> files) and a special system (Portage) so
that you can build apps from sources. We generally only build binaries for releases and snapshots. The <uri link="/doc/gentoo-howto.html">Development HOWTO</uri> covers the contents of an ebuild script in detail.  For full binary ISO releases, we create a full suite of binary packages in an enhanced <c>.tbz2</c> format (<c>.tar.bz2</c> compatible with meta-information attached to the end of the file.)</p>
		</body>
	</section>

	<section>
		<title>Why write a new port system (Portage) instead of using BSD's version?</title>
		<body>

<p>In one sentence, because Portage is much better in so many ways.  One of the design philosophies of the <c>.ebuild</c> syntax was to make it
an analog of what you'd type to install the program manually, thus making
Portage very easy to learn and modify to your needs.  We also have OpenBSD-style "fake" installs, safe unmerging,
system profiles, package masking, a real dependency system, and lots of other good stuff.</p>

		</body>
	</section>

	<section>
		<title>How does this differ from Debian's apt or BSD's ports?</title>
		<body><p>Portage features the best of apt and ports; for example, USE options, a full dependency system, safe installs and uninstalls, and a true package database.  Think of Portage as the best of both worlds; a ports system with the sensibilities and safety of a Linux package management system built-in.</p></body>
	</section>

	<section>
	        <title>How do I install and uninstall packages?</title>
	        <body>
	                <p>The <uri link="/doc/portage-user.html">Portage User Guide</uri> details how to install and uninstall packages, and update Portage.</p>
	        </body>
	</section>

	<section>
		<title>How can I set a global configuration for compiling packages?</title>
		<body><p><path>/etc/make.conf</path> should be modified to override global and profile-specific default options used to compile and merge packages. The most common options are as follows:</p>
		<table>
		<tr>
			<th>Flag</th>
			<th>Description</th>
		</tr>
		<tr>
			<ti>CHOST</ti>
			<ti>This sets the HOST variable for compiles, e.g. <c>i686-pc-linux-gnu</c></ti>
		</tr>
		<tr>
			<ti>CFLAGS</ti>
			<ti>The options for <c>gcc</c> when compiling programs written in C (*.c files)</ti>
		</tr>
		<tr>
			<ti>CXXFLAGS</ti>
			<ti>The options for <c>gcc</c> when compiling programs written in C++ (*.c files)</ti>
		</tr>
		<tr>
			<ti>USE</ti>
			<ti>This allows you to set what optional components you'd like compiled-in, if available.  For example, if you have <c>gnome</c> inside the USE string, then when you compile <c>xchat</c>, it will include GNOME support.  All our dependencies are also USE-aware.</ti>

		</tr>
		<tr>
			<ti>GENTOO_MIRRORS</ti>
			<ti>A space separated list of URIs currently mirroring the Gentoo packages.  Portage will attempt download from a <c>GENTOO_MIRROR</c> first before trying the official <c>SRC_URI</c>.  To force Portage to skip mirrors, set this variable to "".</ti>
		</tr>
		</table>
		</body>
	</section>

	<section>
		<title>What happened to <path>/etc/make.defaults</path>?</title>
		<body>

<p>As of Portage 1.5 onwards, <path>/etc/make.defaults</path> is antiquated; 
if you have portage-1.5-r1 or above installed then you can safely delete it.
This file has been replaced by <path>/etc/make.profile/make.defaults</path> (<path>/etc/make.profile</path> should actually be a symlink to <path>/usr/portage/profiles/default</path>),
which contains system profile-specific default settings. The priority order of
the various configuration files is as follows (highest first):

		
		<ol>
			<li>Environment variables</li>
			<li><path>/etc/make.conf</path>, for your use</li>
			<li><path>/etc/make.profile/make.defaults</path>, for profile-specific defaults</li>
			<li><path>/etc/make.globals</path>, for global defaults (settings not specified in any other place come from here)</li>
		</ol></p></body>
	</section>
	
	<section>
		<title>Is there a way to upgrade all installed packages
		a la <e>apt-get upgrade</e> or <e>make World</e>?</title>
		<body><p>Not yet; we will be adding this functionality
		before the 1.0 release.  For the moment you can use
		<c>emerge --pretend update</c> to list upgradable
		packages, but the actual upgrading has to be done
		package by package (using <c>ebuild</c> or 
		<c>emerge</c>).  Otherwise, things may get merged in
		an incorrect order.</p></body>
	</section>


	<section>
		<title>When updating a package using <c>emerge</c> or <c>ebuild</c>, how do I avoid clobbering my config files?</title>
		<body><p>
		Portage now includes config file management support by default.  Type 
		<c>emerge --help config</c> for more details.  The (overly) simple answer is that if
		a package installs <path>foo</path> somewhere under <path>/etc</path>, and
		another <path>foo</path> already exists there, then the new <path>foo</path> will
		instead be renamed to <path>._cfgxxxx_foo</path> in that directory.
		</p></body>
	</section>

	<section>
		<title>I want to perform the <c>./configure</c> step myself.  Can I?</title>
		<body><p>
		Yes, but it is not trivial.  First do <c>man ebuild</c> followed by
		<c>ebuild foo-x.y.z.ebuild unpack</c>.  Then <c>cd</c> to 
		<path>/var/tmp/portage/foo-x.y.z/work</path>.  You can manually perform
		the <c>./configure</c> and <c>make</c> steps yourself (you'll have to do
		both, since Portage does not separate the configure and build steps).  To
		have Portage finish the installation (so that you can easily remove it later,
		should you desire to do so, and it will be registered in Portage as a possible
		dependency) you first need to <c>touch /var/tmp/portage/foo-x.y.z/.compiled</c>
		(tricking Portage into thinking that <c>ebuild foo-x.y.z.ebuild compile</c> has
		completed), followed by <c>ebuild foo-x.y.z.ebuild merge</c>.
		</p></body>
	</section>

	<section>
		<title>What if rsync doesn't work for me?</title>
		<body><p>If you're behind a firewall that doesn't permit
		rsync traffic, then you can instead download the daily
		/usr/portage snapshot from 
		<uri>http://cvs.gentoo.org/snapshots</uri>.  Just unpack
		the tarball (using <c>tar xvjf portage-foo.tbz2</c>) in
		the <path>/usr</path> directory.
		</p></body>
	</section>

	<section>
		<title>Can I rsync from another operating system?</title>
		<body><p>There's a program called unison that works under both UNIX and Win32, available from <uri>http://www.cis.upenn.edu/~bcpierce/unison/</uri>.</p></body>
	</section>
</chapter>

<chapter>
	<title>Usage</title>
	<section>
		<title>I can start X applications as root only.</title>
		<body><p>Your <path>/tmp</path> directory has the wrong permissions (it needs the sticky bit set). Type the following as root:</p>
		<pre># <i>chmod 1777 /tmp</i></pre>
		</body>
	</section>

	<section>
		<title>DNS name resolution works for root only.</title>
		<body><p><path>/etc/resolv.conf</path> has the wrong permissions; <c>chmod</c> it as follows:</p>
		<pre># <i>chmod 0644 /etc/resolv.conf</i></pre>
		</body>
	</section>

	<section>
		<title>Why is KDE not reading <path>/etc/profile</path>?</title>
		<body><p>You need to add <c>--login</c> to the first line in <path>/opt/kde2.1/bin/startkde</path>, so that it reads as follows:</p>
		<pre>#!/bin/sh --login</pre>
		<p>This fix has been added to recent versions of KDE.</p>
		</body>
	</section>
</chapter>

<chapter>
	<title>Maintenance</title>
	<section>
		<title>ReiserFS and filesystem corruption issues -- how to fix'em, etc</title>
		<body>


		<p>Since kernel 2.4.4, ReiserFS has been very stable and ready for
		production environments.  However, if you have been using ReiserFS
		since before kernel 2.4.4, then it's recommended that you back up all
		your important data and recreate your ReiserFS filesystems with a
		2.4.4+ kernel and a recent version of <path>reiserfsutils</path>.  If
		this isn't possible, try using a recent Gentoo Linux <uri
		path="http://www.ibiblio.org/gentoo/snapshots/disks/">boot/rootdisk</uri>
		to boot your system, and then run <c>reiserfsck --rebuild-tree</c> on
		the corrupted filesystem.  This should make the filesystem consistent
		again, although you may have lost some files or directories due to
		corruption.</p>


		</body>
	</section>

	<section>
		<title>How to I view the timestamps in /var/log/syslog.d, etc.</title>
		<body>

<p>To view multilog (Gentoo Linux 1.0_rc5 and earlier) timestamps, you need to pipe the current log through the <c>tai64nlocal</c>
command:</p>

<pre>
# <i>cat /var/log/syslog.d/current | tai64nlocal | less</i>
</pre>

<p>Or, alternatively, if you want to "tail" the log:</p>

<pre>
# <i>tail -f /var/log/syslog.d/current | tai64nlocal</i>
</pre>

</body>
	</section>
</chapter>

<chapter>
	<title>Development</title>
	<section>
		<title>Where can I report bugs?</title>
		<body><p>For bugs within a specific program, contact the program's author. Otherwise, contact the <uri link="http://cvs.gentoo.org/mailman/listinfo/gentoo-dev">gentoo-dev</uri> mailing list, or on <c>#gentoo</c> on the <uri link="http://www.openprojects.net">openprojects</uri> irc network.</p></body>
	</section>

	<section>
		<title>How oftern are new releases made?</title>
		<body><p>New releases are announced on the <uri link="http://cvs.gentoo.org/mailman/listinfo/gentoo-announce">gentoo-announce</uri> mailing list<!-- TODO: approximatley every X months -->.</p></body>
	</section>

	<section>
		<title>I would like a package to be added to Portage; how would I go about this?</title>
		<body><p>Send an email containing your ebuild to the <uri link="http://cvs.gentoo.org/mailman/listinfo/gentoo-ebuild">gentoo-ebuild</uri> mailing list, and it will be committed to cvs. </p></body>
	</section>

	<section>
		<title>How can I add a question or answer to this FAQ?</title>
		<body><p>You can email an author directly, email the <uri link="http://cvs.gentoo.org/mailman/listinfo/gentoo-dev">Developer Discussion</uri> mailing list, or drop by on <c>#gentoo</c> on the <uri link="http://www.openprojects.net">openprojects</uri> irc network.</p></body>
	</section>
</chapter>

<chapter>
<title>Resources</title>
	<section>
		<title>Where can I find more about supervise used by default in Gentoo Linux 1.0_rc5 and earlier?</title>
		<body><p><!-- TODO: --><uri>http://cr.yp.to/daemontools.html</uri></p></body>
	</section>

	<section>
		<title>Where can I find more information about Gentoo Linux?</title>
		<body><p>The official Gentoo documentation can be found on <uri>http://www.gentoo.org</uri>; general Linux information is at <uri>http://www.linuxdoc.org</uri>.</p></body>
	</section>

	<section>
		<title>Can I buy a CD of Gentoo Linux?</title>
		<body><p>Not currently, although we will most likely be selling CDs in the future.  Stay tuned!
		</p></body>
	</section>
</chapter>
</guide>
