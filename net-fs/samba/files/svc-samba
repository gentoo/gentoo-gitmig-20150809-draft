#!/bin/sh
#RCUPDATE:3 4:76:This line is required for script management

. /etc/rc.d/config/functions

SERVICE=svc-samba
opts="start stop"

start() {
	ebegin "Starting $SERVICE"
	if [ ! -e ${SVCDIR}/control/smbd ]
	then
		ln -sf ../services/smbd ${SVCDIR}/control/smbd
	fi
	if [ ! -e ${SVCDIR}/control/nmbd ]
	then
		ln -sf ../services/nmbd ${SVCDIR}/control/nmbd
	fi
	/usr/bin/svc -u ${SVCDIR}/control/smbd
	/usr/bin/svc -u ${SVCDIR}/control/nmbd
	eend $?
}

stop() {
	ebegin "Stopping $SERVICE"
    if [ -e ${SVCDIR}/control/smbd ]
	then
		/usr/bin/svc -dx ${SVCDIR}/control/smbd/log
		/usr/bin/svc -dx ${SVCDIR}/control/smbd
#		rm ${SVCDIR}/control/smbd
	fi
	if [ -e ${SVCDIR}/control/nmbd ]
	then
		/usr/bin/svc -dx ${SVCDIR}/control/nmbd/log
		/usr/bin/svc -dx ${SVCDIR}/control/nmbd
#		rm ${SVCDIR}/control/nmbd
	fi
	eend $?
}

doservice ${@}



