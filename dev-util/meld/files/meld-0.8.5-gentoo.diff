--- meld
+++ meld
@@ -52,6 +52,12 @@
     print "Due to incompatible API changes some functions may not operate as expected."
 
 #
+# Add the library path to the system load path
+#
+import os
+sys.path = [os.curdir, '/usr/lib/meld'] + sys.path
+
+#
 # main
 #
 import meldapp
--- meld.desktop
+++ meld.desktop
@@ -6,6 +6,6 @@
 Comment=Compare and merge your files.
 TryExec=meld
 Exec=meld
-Path=./meld
 Terminal=false
 Categories=GNOME;Application;Development;
+Icon=/usr/share/meld/glade2/pixmaps/icon.png
--- meldapp.py
+++ meldapp.py
@@ -453,7 +453,7 @@
         gnome.url_show("http://meld.sourceforge.net")
 
     def on_menu_users_manual_activate(self, button):
-        gnome.url_show("file:///"+os.path.abspath(misc.appdir("manual/index.html") ) )
+        gnome.url_show("file:///usr/share/doc/meld-0.8.2/html/index.html")
 
     def on_menu_about_activate(self, *extra):
         about = gtk.glade.XML(misc.appdir("glade2/meld-app.glade"),"about").get_widget("about")
--- misc.py		2003-08-31 23:27:14.172632240 +0200
+++ misc.py	2003-08-31 23:27:14.172632240 +0200
@@ -55,14 +55,7 @@
     return ret
 
 def appdir(pathin):
-    """Return where the application is installed.
-    """
-    where = os.path.dirname(sys.argv[0])
-    pathout = os.path.join( where, pathin )
-    if not os.path.exists(pathout):
-        run_dialog(_("Cannot find '%s'\nI looked in '%s'\n(%s)") % (pathin,where,pathout), None, gtk.MESSAGE_ERROR)
-        sys.exit(1)
-    return pathout
+    return os.path.join( "/usr/share/meld", pathin )
 
 class struct:
     """Similar to a dictionary except that members may be accessed as s.member.
--- dirdiff.py
+++ dirdiff.py
@@ -78,7 +78,7 @@
 
 
 COL_NEWER = tree.COL_END + 1
-pixbuf_newer = gnomeglade.load_pixbuf(misc.appdir("glade2/pixmaps/tree-file-newer.png"), 14)
+pixbuf_newer = gnomeglade.load_pixbuf(misc.appdir("glade2/pixmaps/tree-file-new.png"), 14)
 TYPE_PIXBUF = type(pixbuf_newer)
 
 ################################################################################


